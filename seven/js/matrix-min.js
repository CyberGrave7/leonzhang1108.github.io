function rain(){ctx.fillStyle="rgba(0, 0, 0, 0.05)",ctx.fillRect(0,0,cvs.width,cvs.height);for(var t=0;t<drops.length;t++){var a=charSet[Math.floor(Math.random()*charSet.length)];ctx.fillStyle=randColour(),ctx.font=fontSize+"px "+fonts[randomNum(0,9)],ctx.fillText(a,t*fontSize*3,drops[t]*fontSize*2),Math.random()>.8&&(drops[t]=0),drops[t]++}}function randColour(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}var cvs=document.getElementById("cvs"),ctx=cvs.getContext("2d"),drops=[],charSet,fonts=["friends","Arial","Sans-serif","Papyrus,fantasy","Brush Script MT,cursive","Impact,Haettenschweiler,Franklin Gothic Bold,Charcoal,Helvetica Inserat,Bitstream Vera Sans Bold,Arial Black,sans serif","Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif","Lucida Bright,Georgia,serif","Lucida Sans Typewriter,Lucida Console,monaco,Bitstream Vera Sans Mono,monospace","Copperplate,Copperplate Gothic Light,fantasy"],fontSize=10,randomNum=function(t,a){var r=a-t,o=Math.random(),e=t+Math.floor(o*r);return e},doMatrix=function(){cvs.height=window.screen.height,cvs.width=.98*window.innerWidth;var t=cvs.width/fontSize;charSet="7",charSet=charSet.split("");for(var a=0;a<t;a++)drops[a]=Math.floor(Math.random()*cvs.height)},source=Rx.Observable.timer(80,80);source.subscribe(function(){rain()}),setTimeout(doMatrix,100);