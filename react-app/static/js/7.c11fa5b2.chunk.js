webpackJsonp([7,10,15,21],{142:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={L:[[[0,0,1],[1,1,1]],[[1,0],[1,0],[1,1]],[[1,1,1],[1,0]],[[1,1],[0,1],[0,1]]],J:[[[1,0,0],[1,1,1]],[[0,1],[0,1],[1,1]],[[1,1,1],[0,0,1]],[[1,1],[1,0],[1,0]]],O:[[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]]],T:[[[0,1,0],[1,1,1]],[[1,0],[1,1],[1,0]],[[1,1,1],[0,1,0]],[[0,1],[1,1],[0,1]]],Z:[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]],[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]],S:[[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]],[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]]],I:[[[1,1,1,1]],[[1],[1],[1],[1]],[[1,1,1,1]],[[1],[1],[1],[1]]]}},150:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(22),a=r(142),i=37,s=39,c=40,l=function(e){e.width;var t=e.block,r=e.rx,n=e.y,o=e.playboard,a=e.length,i=[],s=!0;return t.forEach(function(e,t){e.every(function(e,r){return e&&i.push({x:r,y:t}),!0})}),i.every(function(e){var t=e.x,i=e.y,c=t+r,l=n+i-a;return l>=0&&l<20&&o[l][c]&&(s=!1),s}),s},A=((n={})[38]=function(e){e.width;var t=e.block,r=e.rx,n=e.y,o=e.playboard,a=e.length,i=!0;return t.every(function(e,t){return e.every(function(e,s){var c=s+r,l=n+t-a;return l>=0&&l<20&&o[l][c]&&(i=!1),i}),i}),i},n[c]=function(e){var t=e.width,r=e.block,n=e.rx,o=e.y,a=e.playboard,i=e.length;if(21===o)return!1;for(var s=!0,c=[],l=0;l<t;l++)for(var A=r.length-1,p=!0;A>=0&&p;)r[A][l]&&(c.push({x:l,y:A}),p=!1),A--;return c.every(function(e){var t=e.x,r=e.y,c=t+n,l=o+r-i;return l>=0&&l<20&&a[l][c]&&(s=!1),s}),s},n[i]=l,n[s]=l,n);t.default={getCurrPosition:function(e){var t=e.x,r=e.y,n=e.cBlock,i=e.screen,s=e.rotate,c=e.moveTo,l=o.a.clone(i),p=a.default[n][s],d=p[0].length,u=10-d,f=Math.floor((10-d)/2),m=p.length,C=r,B=f+t;B<0&&(B=0,t=-f),B>u&&(B=u,t=d%2===1?f+1:f);var w=A[c]({width:d,block:p,rx:B,y:r,playboard:l,length:m});if(w)for(;C>0&&m>0;){var v=--C,y=p[m-1];v=v>20?20:v;for(var b=0;b<10;b++){if(b<y.length)l[v][B+b]||(l[v][B+b]=y[b])}m--}return{playboard:l,x:t,screen:i,couldMove:w}}}},374:function(e,t,r){var n=r(513);"string"===typeof n&&(n=[[e.i,n,""]]);var o={hmr:!1,transform:void 0};r(365)(n,o);n.locals&&(e.exports=n.locals)},513:function(e,t,r){(e.exports=r(364)(!0)).push([e.i,'.tetris-wrapper{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-item-align:center;align-self:center}.tetris-wrapper.mobile .tetris-screen{-webkit-transform:scale(.8);-ms-transform:scale(.8);transform:scale(.8)}.tetris-wrapper .tetris-screen{margin:0 auto;background-color:#9ead86;padding:10px;border-radius:8px}.tetris-wrapper .tetris-screen .row{height:16px}.tetris-wrapper .tetris-screen .row .item{width:20px;height:20px;padding:2px;border:2px solid #879372;margin:0 2px 2px 0;float:left}.tetris-wrapper .tetris-screen .row .item.block{border:2px solid #000}.tetris-wrapper .tetris-screen .row .item.block:after{background:#000}.tetris-wrapper .tetris-screen .row .item.full{border:2px solid #666}.tetris-wrapper .tetris-screen .row .item.full:after{background:#666}.tetris-wrapper .tetris-screen .row .item:after{content:"";display:block;width:12px;height:12px;background:#879372;overflow:hidden}.tetris-wrapper .btn-wrapper{text-align:center}.tetris-wrapper .btn-wrapper i{font-size:3rem;-webkit-transition:all .3s;-o-transition:all .3s;transition:all .3s;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.tetris-wrapper .btn-wrapper i:active{color:#000;-webkit-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2)}.tetris-wrapper .btn-wrapper .middle i:first-child{margin-right:2.5rem}',"",{version:3,sources:["/Users/leonzhang/Documents/github/typescript/leon-ts-app/src/pages/Tetris/index.less"],names:[],mappings:"AAAA,gBACE,WAAY,AACZ,YAAa,AACb,oBAAqB,AACrB,aAAc,AACd,0BAA2B,AACvB,sBAAuB,AAC3B,qBAAsB,AAClB,uBAAwB,AAC5B,2BAA4B,AACxB,iBAAmB,CACxB,AACD,sCACE,4BAA8B,AAC1B,wBAA0B,AACtB,mBAAsB,CAC/B,AACD,+BACE,cAAe,AACf,yBAA0B,AAC1B,aAAc,AACd,iBAAmB,CACpB,AACD,oCACE,WAAa,CACd,AACD,0CACE,WAAY,AACZ,YAAa,AACb,YAAa,AACb,yBAA0B,AAC1B,mBAAoB,AACpB,UAAY,CACb,AACD,gDACE,qBAAuB,CACxB,AACD,sDACE,eAAiB,CAClB,AACD,+CACE,qBAAuB,CACxB,AACD,qDACE,eAAiB,CAClB,AACD,gDACE,WAAY,AACZ,cAAe,AACf,WAAY,AACZ,YAAa,AACb,mBAAoB,AACpB,eAAiB,CAClB,AACD,6BACE,iBAAmB,CACpB,AACD,+BACE,eAAgB,AAChB,2BAA4B,AAC5B,sBAAuB,AACvB,mBAAoB,AACpB,2BAA4B,AACxB,uBAAwB,AACpB,kBAAoB,CAC7B,AACD,sCACE,WAAY,AACZ,6BAA8B,AAC1B,yBAA0B,AACtB,oBAAsB,CAC/B,AACD,mDACE,mBAAqB,CACtB",file:"index.less",sourcesContent:['.tetris-wrapper {\n  width: 100%;\n  height: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n}\n.tetris-wrapper.mobile .tetris-screen {\n  -webkit-transform: scale(0.8);\n      -ms-transform: scale(0.8);\n          transform: scale(0.8);\n}\n.tetris-wrapper .tetris-screen {\n  margin: 0 auto;\n  background-color: #9ead86;\n  padding: 10px;\n  border-radius: 8px;\n}\n.tetris-wrapper .tetris-screen .row {\n  height: 16px;\n}\n.tetris-wrapper .tetris-screen .row .item {\n  width: 20px;\n  height: 20px;\n  padding: 2px;\n  border: 2px solid #879372;\n  margin: 0 2px 2px 0;\n  float: left;\n}\n.tetris-wrapper .tetris-screen .row .item.block {\n  border: 2px solid #000;\n}\n.tetris-wrapper .tetris-screen .row .item.block:after {\n  background: #000;\n}\n.tetris-wrapper .tetris-screen .row .item.full {\n  border: 2px solid #666;\n}\n.tetris-wrapper .tetris-screen .row .item.full:after {\n  background: #666;\n}\n.tetris-wrapper .tetris-screen .row .item:after {\n  content: "";\n  display: block;\n  width: 12px;\n  height: 12px;\n  background: #879372;\n  overflow: hidden;\n}\n.tetris-wrapper .btn-wrapper {\n  text-align: center;\n}\n.tetris-wrapper .btn-wrapper i {\n  font-size: 3rem;\n  -webkit-transition: all .3s;\n  -o-transition: all .3s;\n  transition: all .3s;\n  -webkit-transform: scale(1);\n      -ms-transform: scale(1);\n          transform: scale(1);\n}\n.tetris-wrapper .btn-wrapper i:active {\n  color: #000;\n  -webkit-transform: scale(1.2);\n      -ms-transform: scale(1.2);\n          transform: scale(1.2);\n}\n.tetris-wrapper .btn-wrapper .middle i:first-child {\n  margin-right: 2.5rem;\n}\n'],sourceRoot:""}])},56:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(0),a=(r.n(o),r(374)),i=(r.n(a),r(22)),s=r(150),c=r(46),l=(r(89),this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),A={left:37,up:38,right:39,down:40},p=["I","L","J","T","Z","S","O"],d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reset=function(e){t.setState({cBlock:p[i.a.random(0,7)],y:1,x:0,rotate:0,screen:t.clearRow(t.state.playboard)},e)},t.clearRow=function(e){var t=i.a.clone(e).map(function(e){return e.map(function(e){return e?2:0})});return e.forEach(function(e,r){e.every(function(e){return e})&&(t.splice(r,1),t.unshift(new Array(10).fill(0)))}),t},t.keydown=function(e){return t.doMove(e.keyCode)},t.doMove=function(e){var r=t.state,n=r.x,o=r.y,a=r.screen,i=r.cBlock,c=r.row,l=r.rotate,p=[[]],d=n;switch(e){case A.left:d=n-1;var u=s.default.getCurrPosition({x:d,y:o?o-1:20,cBlock:i,screen:a,rotate:l,moveTo:A.left}),f=u.playboard,m=u.x;return void(u.couldMove&&(d=m,p=f,t.setState({playboard:p,x:d})));case A.right:d=n+1;var C=s.default.getCurrPosition({x:d,y:o?o-1:20,cBlock:i,screen:a,rotate:l,moveTo:A.right}),B=C.playboard,w=C.x;return void(C.couldMove&&(d=w,p=B,t.setState({playboard:p,x:d})));case A.down:if(o>c)return;return void(s.default.getCurrPosition({x:d,y:o,cBlock:i,screen:a,rotate:l,moveTo:A.down}).couldMove?t.newInterval():(t.isDropComplete(!0),t.reset(t.newInterval)));case A.up:var v=l;v=v>=3?0:v+1;var y=s.default.getCurrPosition({x:n,y:o?o-1:20,cBlock:i,screen:a,rotate:v,moveTo:A.up}),b=y.playboard;return void(y.couldMove&&(p=b,t.setState({playboard:p,rotate:v})))}},t.newInterval=function(){var e=t.state.interval;e&&clearInterval(e),t.doMovePlayboard()},t.doMovePlayboard=function(){var e=t.state,r=e.x,n=e.y,o=e.intervalTime,a=setInterval(function(){var e=t.state,r=e.x,n=e.y;t.movePlayboard({x:r,y:n})},o);t.movePlayboard({x:r,y:n}),t.setState({interval:a})},t.movePlayboard=function(e){var r=e.x,n=e.y,o=t.state,a=o.screen,i=o.cBlock,c=o.rotate,l=s.default.getCurrPosition({x:r,y:n,cBlock:i,screen:a,rotate:c,moveTo:A.down}),p=l.playboard;l.couldMove?t.setState({playboard:p,y:n+1},t.isDropComplete):t.isDropComplete(!0,t.reset)},t.isDropComplete=function(e,r){(0===t.state.y||e)&&t.setState({screen:i.a.clone(t.state.playboard).map(function(e){return e.map(function(e){return e?2:0})})},r)},t.calculateScreen=function(e){for(var t=e.row,r=e.column,n=[],o=0;o<t;o++){for(var a=[],i=0;i<r;i++)a.push(0);n.push(a)}return n},t.renderPlayboard=function(){return t.state.playboard.map(function(e,t){return o.createElement("div",{className:"row",key:t},e.map(function(e,t){return o.createElement("div",{key:t,className:"item "+(e?1===e?"block":"full":"")})}))})},t}return l(t,e),t.prototype.componentWillMount=function(){var e=this.calculateScreen({row:20,column:10});document.addEventListener("keydown",this.keydown),this.setState({row:20,column:10,screen:e,playboard:e,cBlock:p[i.a.random(0,7)],y:0,x:0,rotate:0,intervalTime:500})},t.prototype.componentDidMount=function(){this.doMovePlayboard()},t.prototype.componentWillUnmount=function(){this.state.interval&&clearInterval(this.state.interval),document.removeEventListener("keydown",this.keydown)},t.prototype.render=function(){var e=this.props.isMobile;return o.createElement("div",{className:"tetris-wrapper "+(e?"mobile":"")},o.createElement("div",{className:"tetris-screen"},this.renderPlayboard()),o.createElement("div",{className:"btn-wrapper"},o.createElement(c.a,{type:"ts-app icon-up-circle",onClick:i.a.handle(this.doMove,A.up)}),o.createElement("div",{className:"middle"},o.createElement(c.a,{type:"ts-app icon-left-circle",onClick:i.a.handle(this.doMove,A.left)}),o.createElement(c.a,{type:"ts-app icon-right-circle",onClick:i.a.handle(this.doMove,A.right)})),o.createElement(c.a,{type:"ts-app icon-down-circle",onClick:i.a.handle(this.doMove,A.down)})))},t}(o.Component);t.default=i.a.connect({component:d,mapStateToProps:function(e){return{isMobile:e.common.isMobile}}})}});
//# sourceMappingURL=7.c11fa5b2.chunk.js.map