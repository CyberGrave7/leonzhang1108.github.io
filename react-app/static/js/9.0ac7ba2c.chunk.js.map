{"version":3,"sources":["components/PictureScrutinizer/index.tsx","webpack:///./src/components/PictureScrutinizer/index.less?ead0","components/PictureScrutinizer/index.less","components/SVGLabelEditor/index.tsx","webpack:///./src/components/SVGLabelEditor/index.less?3dfc","components/SVGLabelEditor/index.less","components/SVGLabelEditor/DragHOC.tsx","img/justice_league.jpg","webpack:///./src/pages/Widgets/index.less?5a04","pages/Widgets/index.tsx","pages/Widgets/index.less"],"names":["PictureScrutinizer","_super","_this","apply","this","arguments","clicked","isSVGDragging","lastMouseX","lastMouseY","movedX","movedY","initCanvas","img","Image","src","props","onload","canvas","document","querySelector","ctx","getContext","_a","wrapperWidth","wrapperHeight","width","height","draw","setEvents","zoom","scale","factor","Math","pow","state","times","currentTimes","setState","wrapper","onwheel","e","wheelDelta","preventDefault","onmousedown","offsetX","offsetY","resetTopLeft","onmousemove","drag","onmouseup","left","top","lastX","lastY","indexOf","target","tagName","sTop","_b","sLeft","_c","calculate","undefined","clearRect","drawImage","imgHeight","imgWidth","imgRatio","zoomImg","__extends","prototype","componentWillMount","componentDidMount","componentWillReceiveProps","render","__WEBPACK_IMPORTED_MODULE_0_react__","ref","el","__WEBPACK_IMPORTED_MODULE_2__components_SVGLabelEditor__","className","__webpack_exports__","content","__webpack_require__","module","i","options","hmr","transform","locals","exports","push","version","sources","names","mappings","file","sourceRoot","baseCirlce","fill","cursor","baseLine","stroke","basePolygon","SVGLabelEditor","pointsList","tempList","r","strokeWidth","oriTop","oriLeft","calculatePoint","x","y","calclateTimes","v","onMouseUp","onMouseMove","p","resetPoint","onPolygonPointMouseMove","index","onPolygonMouseMove","map","point","x0","y0","wrapperMouseDown","wrapperMouseMove","wrapperMouseUp","addPoint","onPoligonLineClick","length","splice","clientX","clientY","getBoundingClientRect","offsetLeft","offsetTop","convertPoints2String","points","join","renderTemp","radius","isLast","xn","yn","x1","y1","_d","x2","y2","key","__assign","__WEBPACK_IMPORTED_MODULE_2__DragHOC__","__WEBPACK_IMPORTED_MODULE_3__utils__","handle","cx","cy","renderPolygon","renderPolygonWrapper","onClick","getDerivedStateFromProps","states","onMouseDown","sourcesContent","DragHOC","pageX","pageY","dragging","Object","assign","window","addEventListener","children","Widgets","__WEBPACK_IMPORTED_MODULE_3__components_PictureScrutinizer__","__WEBPACK_IMPORTED_MODULE_4__img_justice_league_jpg___default","a","__WEBPACK_IMPORTED_MODULE_1__utils__","connect","component","mapStateToProps","common","contentHeight","contentWidth"],"mappings":"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","file":"static/js/9.0ac7ba2c.chunk.js","sourcesContent":["import * as React from 'react'\nimport './index.less'\nimport SVGLabelEditor from '@components/SVGLabelEditor'\n\ninterface IProps {\n  wrapperHeight: number,\n  wrapperWidth: number,\n  src: string\n}\ninterface IStates {\n  times: number,\n  currentTimes: number,\n  top: number | null,\n  left: number | null,\n  lastX: number,\n  lastY: number\n}\n\nclass PictureScrutinizer extends React.Component<IProps, IStates> {\n\n  img\n  clicked = false\n  isSVGDragging = false\n  lastMouseX: number | null = null\n  lastMouseY: number | null = null\n  movedX: number | null = null\n  movedY: number | null = null\n  wrapper\n  canvas\n  ctx\n\n  componentWillMount () {\n    this.setState({\n      times: 1,\n      currentTimes: 1,\n      top: null,\n      left: null,\n      lastX: 0,\n      lastY: 0\n    })\n  }\n\n  componentDidMount () {\n    this.initCanvas()\n  }\n\n  componentWillReceiveProps () {\n    this.initCanvas()\n  }\n\n  initCanvas = () => {\n    this.img = new Image()\n    const { src } = this.props\n    this.img.src = src\n    this.img.onload = () => {\n      this.canvas = document.querySelector('.picture-scrutinizer') as HTMLCanvasElement\n      this.ctx = this.canvas.getContext('2d')\n      const { wrapperWidth, wrapperHeight } = this.props\n      this.canvas.width = wrapperWidth\n      this.canvas.height = wrapperHeight\n      this.draw()\n      this.setEvents()\n    }\n  }\n\n  zoom = scale => {\n    const factor = Math.pow(1.1, scale)\n    const { times, currentTimes } = this.state\n    this.setState({\n      times: times * factor,\n      currentTimes: currentTimes * factor\n    }, this.draw)\n  }\n\n  setEvents = () => {\n    this.wrapper.onwheel = e => {\n      this.lastMouseX && this.lastMouseY && this.zoom(e.wheelDelta / 300)\n      e.preventDefault()\n    }\n    this.wrapper.onmousedown = e => {\n      const { offsetX, offsetY } = e\n      this.clicked = true\n      this.movedX = offsetX\n      this.movedY = offsetY\n      this.resetTopLeft()\n    }\n    this.wrapper.onmousemove = e => {\n      const { offsetX, offsetY } = e\n      const { currentTimes } = this.state\n      this.lastMouseX = offsetX\n      this.lastMouseY = offsetY\n      currentTimes !== 1 && this.setState({ currentTimes: 1 })\n      this.clicked ? this.drag(e) : this.resetTopLeft()\n    }\n    document.onmouseup = () => {\n      this.clicked = false\n      this.movedX = null\n      this.movedY = null\n      this.isSVGDragging = false\n      this.resetTopLeft()\n    }\n  }\n\n  resetTopLeft = () => {\n    const { left, top, lastX, lastY } = this.state\n    if (lastX !== left || lastY !== top) {\n      this.setState({\n        left: lastX,\n        top: lastY\n      })\n    }\n  }\n\n  drag = e => {\n    if (['circle', 'line', 'polygon'].indexOf(e.target.tagName) >= 0 || this.isSVGDragging) {\n      this.isSVGDragging = true\n      return\n    }\n    const { offsetX, offsetY } = e\n    const { top: sTop, left: sLeft } = this.state\n    const left = sLeft + offsetX - (this.movedX || 0)\n    const top = sTop + offsetY - (this.movedY || 0)\n    this.draw(left, top)\n  }\n\n  draw = (left?, top?) => {\n    const { wrapperWidth, wrapperHeight } = this.props\n    const { top: sTop, left: sLeft, currentTimes, times } = this.state\n    const { width, height } = this.calculate(this.img, this.props)\n\n    if (undefined === left || undefined === top) {\n      if (sTop !== null && sLeft !== null) {\n        left = sLeft || 0\n        top = sTop || 0\n      } else {\n        left = (wrapperWidth - width) / 2\n        top = (wrapperHeight - height) / 2\n      }\n    }\n    left = left + ((this.lastMouseX || 0) - left) * (1 - currentTimes)\n    top = top + ((this.lastMouseY || 0) - top) * (1 - currentTimes)\n\n    this.setState({\n      lastX: left,\n      lastY: top\n    })\n\n    this.ctx.clearRect(0, 0, wrapperWidth, wrapperHeight)\n    this.ctx.drawImage(this.img, left, top, width * times, height * times)\n  }\n\n  calculate = ({ height: imgHeight, width: imgWidth }, { wrapperHeight: height, wrapperWidth: width }) => {\n    const ratio = imgHeight / imgWidth - height / width\n    const imgRatio = imgHeight / imgWidth\n    const zoomImg = {\n      height: 0,\n      width: 0\n    }\n    if (ratio > 0) {\n      zoomImg.height = height\n      zoomImg.width = zoomImg.height / imgRatio\n    } else {\n      zoomImg.width = width\n      zoomImg.height = zoomImg.width * imgRatio\n    }\n    return zoomImg\n  }\n\n  render () {\n    const { times, top, left, lastX, lastY } = this.state\n    return (\n      <div ref={el => this.wrapper = el} >\n        <SVGLabelEditor\n          times={times}\n          top={top}\n          left={left}\n          lastX={lastX}\n          lastY={lastY}\n        />\n        <canvas className='picture-scrutinizer' />\n      </div>\n    )\n  }\n}\n\nexport default PictureScrutinizer\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PictureScrutinizer/index.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--1-oneOf-0-2!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-0-4!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PictureScrutinizer/index.less\n// module id = 1496\n// module chunks = 9","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.less\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"minimize\":true,\"sourceMap\":true}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js?{\"javascriptEnabled\":true}!./src/components/PictureScrutinizer/index.less\n// module id = 1497\n// module chunks = 9","import * as React from 'react'\nimport './index.less'\nimport { Point } from '@interface'\nimport DragHOC from './DragHOC'\nimport Utils from '@utils'\n\ninterface IProps {\n  times: number,\n  top: number | null,\n  left: number | null,\n  lastX: number,\n  lastY: number\n}\n\ninterface IStates {\n  pointsList: Point[][],\n  tempList: Point[]\n  r: number,\n  strokeWidth: number,\n  oriTop: number | null,\n  oriLeft: number | null\n}\n\nconst baseCirlce = {\n  fill: 'rgb(89, 249, 46)',\n  cursor: 'move'\n}\n\nconst baseLine = {\n  stroke: 'rgb(211, 220, 230)'\n}\n\nconst basePolygon = {\n  fill: 'rgb(56, 120, 196, .5)',\n  cursor: 'move'\n}\n\nclass SVGLabelEditor extends React.Component<IProps, IStates> {\n\n  static getDerivedStateFromProps (props, states) {\n    const { left, top } = props\n    const { oriLeft, oriTop } = states\n    if (left !== null && top !== null && oriLeft === null && oriTop === null) {\n      return {\n        oriLeft: left,\n        oriTop: top\n      }\n    }\n    return null\n  }\n\n  clicked = false\n  wrapper\n\n  state = {\n    pointsList: [] as Point[][],\n    tempList: [] as Point[],\n    r: 7,\n    strokeWidth: 1.5,\n    oriTop: null,\n    oriLeft: null\n  }\n\n  calculatePoint = (x, y) => {\n    const { lastX, lastY, times } = this.props\n    return {\n      x: x * times + lastX,\n      y: y * times + lastY\n    }\n  }\n\n  calclateTimes = v => v * this.props.times\n\n  onMouseUp = i => {\n    if (!this.clicked || i) return\n    const { tempList, pointsList } = this.state\n    pointsList.push(tempList)\n    this.setState({\n      tempList: [],\n      pointsList\n    })\n  }\n\n  onMouseMove = (i, p: Point) => {\n    const { tempList } = this.state\n    tempList[i] = this.resetPoint(tempList[i], p)\n    this.setState({ tempList })\n  }\n\n  onPolygonPointMouseMove = (i, index, p: Point) => {\n    const { pointsList } = this.state\n    pointsList[i][index] = this.resetPoint(pointsList[i][index], p)\n    this.setState({ pointsList })\n  }\n\n  onPolygonMouseMove = (i, p: Point) => {\n    const { pointsList } = this.state\n    pointsList[i] = pointsList[i].map(point => this.resetPoint(point, p))\n    this.setState({ pointsList })\n  }\n\n  resetPoint = ({ x: x0, y: y0 }, { x, y }) => ({\n    x: x0 + x / this.props.times,\n    y: y0 + y / this.props.times\n  })\n\n  wrapperMouseDown = e => {\n    this.clicked = true\n  }\n\n  wrapperMouseMove = e => {\n    this.clicked = false\n  }\n\n  wrapperMouseUp = e => {\n    const { target } = e\n    if (target.tagName !== 'svg' || !this.clicked) return\n    const { tempList } = this.state\n    tempList.push(this.addPoint(e))\n    this.setState({ tempList })\n    this.clicked = false\n  }\n\n  onPoligonLineClick = (i, index, e) => {\n    const { pointsList } = this.state\n    index = index === pointsList[i].length - 1 ? 0 : index + 1\n    pointsList[i].splice(index, 0, this.addPoint(e))\n    this.setState({ pointsList })\n  }\n\n  addPoint = e => {\n    const { clientX, clientY } = e\n    const { left: offsetLeft, top: offsetTop } = this.wrapper.getBoundingClientRect()\n    const { times, left, top } = this.props\n    const x = (clientX - (left || 0) - offsetLeft) / times\n    const y = (clientY - (top || 0) - offsetTop) / times\n    return { x, y }\n  }\n\n  convertPoints2String = points =>\n    points.map(({ x, y }) => this.calculatePoint(x, y))\n      .map(({ x, y }) => `${x},${y}`).join(' ')\n\n  renderTemp = ({ tempList, width, radius }) => tempList.map(({ x, y }: Point, i) => {\n    const isLast = i === tempList.length - 1\n    const { x: xn, y: yn } = isLast ? tempList[0] : tempList[i + 1]\n    const { x: x1, y: y1 } = this.calculatePoint(x, y)\n    const { x: x2, y: y2 } = this.calculatePoint(xn, yn)\n    return (\n      <React.Fragment key={i}>\n        {!isLast ? <line x1={x1} y1={y1} x2={x2} y2={y2} strokeWidth={width} {...baseLine}/> : ''}\n        <DragHOC\n          onMouseMove={Utils.handle(this.onMouseMove, i)}\n        >\n          <circle cx={x1} cy={y1} r={radius} {...baseCirlce}\n            onMouseUp={Utils.handle(this.onMouseUp, i)}\n          />\n        </DragHOC>\n      </React.Fragment>\n    )\n  })\n\n  renderPolygon = ({ pointsList, width, radius }) => pointsList.map((points, i) => (\n    <React.Fragment key={i}>\n      <DragHOC\n        onMouseMove={Utils.handle(this.onPolygonMouseMove, i)}\n      >\n        <polygon points={this.convertPoints2String(points)} {...basePolygon}/>\n      </DragHOC>\n      {\n        this.renderPolygonWrapper({ points, i, width, radius })\n      }\n    </React.Fragment>\n  ))\n\n  renderPolygonWrapper = ({ points, width, radius, i }) =>\n    points.map(({ x, y }) => this.calculatePoint(x, y))\n      .map(({ x, y }, index) => {\n        const isLast = index === points.length - 1\n        const { x: xn, y: yn } = isLast ? points[0] : points[index + 1]\n        const { x: x2, y: y2 } = this.calculatePoint(xn, yn)\n        return (\n          <React.Fragment key={index}>\n            <line x1={x} y1={y} x2={x2} y2={y2} strokeWidth={width} {...baseLine}\n              onClick={Utils.handle(this.onPoligonLineClick, i, index)}\n            />\n            <DragHOC\n              onMouseMove={Utils.handle(this.onPolygonPointMouseMove, i, index)}\n            >\n              <circle cx={x} cy={y} r={radius} {...baseCirlce} />\n            </DragHOC>\n          </React.Fragment>\n        )\n      })\n\n  render () {\n    const { pointsList, tempList, r, strokeWidth } = this.state\n    const radius = this.calclateTimes(r)\n    const width = this.calclateTimes(strokeWidth)\n    return (\n      <svg className='svg-wrapper'\n        ref={el => this.wrapper = el}\n        onMouseDown={this.wrapperMouseDown}\n        onMouseMove={this.wrapperMouseMove}\n        onMouseUp={this.wrapperMouseUp}\n      >\n      { this.renderTemp({ tempList, width, radius }) }\n      { this.renderPolygon({ pointsList, width, radius }) }\n      </svg>\n    )\n  }\n}\n\nexport default SVGLabelEditor\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/SVGLabelEditor/index.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--1-oneOf-0-2!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-0-4!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SVGLabelEditor/index.less\n// module id = 1499\n// module chunks = 9","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".svg-wrapper{position:absolute;height:100%;width:100%}\", \"\", {\"version\":3,\"sources\":[\"/Users/leonzhang/Documents/github/typescript/leon-ts-app/src/components/SVGLabelEditor/index.less\"],\"names\":[],\"mappings\":\"AAAA,aACE,kBAAmB,AACnB,YAAa,AACb,UAAY,CACb\",\"file\":\"index.less\",\"sourcesContent\":[\".svg-wrapper {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"minimize\":true,\"sourceMap\":true}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js?{\"javascriptEnabled\":true}!./src/components/SVGLabelEditor/index.less\n// module id = 1500\n// module chunks = 9","import * as React from 'react'\nimport { Point } from '@interface'\n\ninterface IProps {\n  children: React.ReactElement<any>,\n  onMouseMove (v: Point): void\n}\n\ninterface IStates {\n  dragging: boolean,\n  x: number,\n  y: number\n}\n\nclass DragHOC extends React.Component<IProps, IStates> {\n\n  componentDidMount () {\n    this.setState({\n      dragging: false,\n      x: 0,\n      y: 0\n    })\n  }\n\n  onMouseDown = e => {\n    const { pageX, pageY } = e\n    this.setState({\n      dragging: true,\n      x: pageX,\n      y: pageY\n    })\n  }\n\n  onMouseUp = () => {\n    Object.assign(this.state, {\n      dragging: false,\n      x: 0,\n      y: 0\n    })\n  }\n\n  onMouseMove = e => {\n    const { pageX, pageY } = e\n    const {\n      state: { dragging, x, y }\n    } = this\n    if (!dragging) return\n    this.props.onMouseMove({\n      x: pageX - x,\n      y: pageY - y\n    })\n    Object.assign(this.state, {\n      x: pageX,\n      y: pageY\n    })\n  }\n\n  render () {\n    const { onMouseDown, onMouseMove, onMouseUp } = this\n\n    window.addEventListener('mouseup', onMouseUp)\n    window.addEventListener('mousemove', onMouseMove)\n    return React.cloneElement(this.props.children, {\n      onMouseDown\n    })\n  }\n}\n\nexport default DragHOC\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/SVGLabelEditor/DragHOC.tsx","module.exports = __webpack_public_path__ + \"static/media/justice_league.a324bd16.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/img/justice_league.jpg\n// module id = 1502\n// module chunks = 9","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--1-oneOf-0-2!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-0-4!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Widgets/index.less\n// module id = 392\n// module chunks = 9 33","import * as React from 'react'\nimport Utils from '@utils'\nimport './index.less'\n// import DatePicker from '@components/DatePicker'\nimport PictureScrutinizer from '@components/PictureScrutinizer'\nimport src from '@img/justice_league.jpg'\n\ninterface IProps {\n  height: number,\n  width: number\n}\n\nclass Widgets extends React.Component<IProps> {\n  render () {\n    // const fromDate = new Date('1991-11-8')\n    // const toDate = new Date()\n    const { height, width } = this.props\n    return (\n      <div className='widget-wrapper'>\n        {/* <DatePicker fromDate={fromDate} toDate={toDate}/> */}\n        <PictureScrutinizer\n          wrapperHeight={height}\n          wrapperWidth={width}\n          src={src}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Utils.connect({\n  component: Widgets,\n  mapStateToProps: state => ({\n    height: state.common.contentHeight,\n    width: state.common.contentWidth\n  })\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Widgets/index.tsx","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".widget-wrapper{width:100%;height:100%}\", \"\", {\"version\":3,\"sources\":[\"/Users/leonzhang/Documents/github/typescript/leon-ts-app/src/pages/Widgets/index.less\"],\"names\":[],\"mappings\":\"AAAA,gBACE,WAAY,AACZ,WAAa,CACd\",\"file\":\"index.less\",\"sourcesContent\":[\".widget-wrapper {\\n  width: 100%;\\n  height: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"minimize\":true,\"sourceMap\":true}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js?{\"javascriptEnabled\":true}!./src/pages/Widgets/index.less\n// module id = 677\n// module chunks = 9 33"],"sourceRoot":""}