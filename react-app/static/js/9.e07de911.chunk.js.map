{"version":3,"sources":["components/PictureScrutinizer/index.tsx","webpack:///./src/components/PictureScrutinizer/index.less?ead0","components/PictureScrutinizer/index.less","img/justice_league.jpg","webpack:///./src/pages/Widgets/index.less?5a04","pages/Widgets/index.tsx","pages/Widgets/index.less"],"names":["PictureScrutinizer","_super","_this","apply","this","arguments","clicked","times","currentTimes","lastX","lastY","lastMouseX","lastMouseY","left","top","movedX","movedY","initCanvas","img","Image","src","props","onload","canvas","document","querySelector","ctx","getContext","_a","wrapperWidth","wrapperHeight","width","height","draw","setEvents","zoom","scale","factor","Math","pow","onwheel","e","wheelDelta","preventDefault","onmousedown","offsetX","offsetY","resetTopLeft","onmousemove","drag","onmouseup","_b","calculate","clearRect","drawImage","imgHeight","imgWidth","imgRatio","zoomImg","__extends","prototype","componentDidMount","componentWillReceiveProps","render","__WEBPACK_IMPORTED_MODULE_0_react__","className","__webpack_exports__","content","__webpack_require__","module","i","options","hmr","transform","locals","exports","push","version","sources","names","mappings","file","sourceRoot","p","Widgets","__WEBPACK_IMPORTED_MODULE_3__components_PictureScrutinizer__","__WEBPACK_IMPORTED_MODULE_4__img_justice_league_jpg___default","a","__WEBPACK_IMPORTED_MODULE_1__utils__","connect","component","mapStateToProps","state","common","contentHeight","contentWidth","sourcesContent"],"mappings":"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","file":"static/js/9.e07de911.chunk.js","sourcesContent":["import * as React from 'react'\nimport './index.less'\n\ninterface IProps {\n  wrapperHeight: number,\n  wrapperWidth: number,\n  src: string\n}\n\nclass PictureScrutinizer extends React.Component<IProps> {\n\n  img\n  clicked = false\n  times = 1\n  currentTimes = 1\n  lastX = 0\n  lastY = 0\n  lastMouseX: number | null = null\n  lastMouseY: number | null = null\n  left: number | null = null\n  top: number | null = null\n  movedX: number | null = null\n  movedY: number | null = null\n  canvas\n  ctx\n\n  componentDidMount () {\n    this.initCanvas()\n  }\n\n  componentWillReceiveProps () {\n    this.initCanvas()\n  }\n\n  initCanvas = () => {\n    this.img = new Image()\n    const { src } = this.props\n    this.img.src = src\n    this.img.onload = () => {\n      this.canvas = document.querySelector('.picture-scrutinizer') as HTMLCanvasElement\n      this.ctx = this.canvas.getContext('2d')\n      const { wrapperWidth, wrapperHeight } = this.props\n      this.canvas.width = wrapperWidth\n      this.canvas.height = wrapperHeight\n      this.draw()\n      this.setEvents()\n    }\n  }\n\n  zoom = scale => {\n    const factor = Math.pow(1.1, scale)\n    this.times *= factor\n    this.currentTimes *= factor\n    this.draw()\n  }\n\n  setEvents = () => {\n    this.canvas.onwheel = e => {\n      this.lastMouseX && this.lastMouseY && this.zoom(e.wheelDelta / 300)\n      e.preventDefault()\n    }\n    this.canvas.onmousedown = e => {\n      const { offsetX, offsetY } = e\n      this.clicked = true\n      this.movedX = offsetX\n      this.movedY = offsetY\n      this.resetTopLeft()\n    }\n    this.canvas.onmousemove = e => {\n      const { offsetX, offsetY } = e\n      this.lastMouseX = offsetX\n      this.lastMouseY = offsetY\n      this.currentTimes = 1\n      this.clicked ? this.drag(e) : this.resetTopLeft()\n    }\n    document.onmouseup = () => {\n      this.clicked = false\n      this.movedX = null\n      this.movedY = null\n      this.resetTopLeft()\n    }\n  }\n\n  resetTopLeft = () => {\n    this.left = this.lastX\n    this.top = this.lastY\n  }\n\n  drag = e => {\n    const { offsetX, offsetY } = e\n    const left = this.left + offsetX - (this.movedX || 0)\n    const top = this.top + offsetY - (this.movedY || 0)\n    this.draw(left, top)\n  }\n\n  draw = (left?, top?) => {\n    const { wrapperWidth, wrapperHeight } = this.props\n    const { width, height } = this.calculate(this.img, this.props)\n\n    if (!left || !top) {\n      if (this.left && this.top) {\n        left = this.left || 0\n        top = this.top || 0\n      } else {\n        left = (wrapperWidth - width) / 2\n        top = (wrapperHeight - height) / 2\n      }\n    }\n\n    this.lastX = left = left + ((this.lastMouseX || 0) - left) * (1 - this.currentTimes)\n    this.lastY = top = top + ((this.lastMouseY || 0) - top) * (1 - this.currentTimes)\n    this.ctx.clearRect(0, 0, wrapperWidth, wrapperHeight)\n    this.ctx.drawImage(this.img, left, top, width * this.times, height * this.times)\n  }\n\n  calculate = ({ height: imgHeight, width: imgWidth }, { wrapperHeight: height, wrapperWidth: width }) => {\n    const ratio = imgHeight / imgWidth - height / width\n    const imgRatio = imgHeight / imgWidth\n    const zoomImg = {\n      height: 0,\n      width: 0\n    }\n    if (ratio > 0) {\n      zoomImg.height = height\n      zoomImg.width = zoomImg.height / imgRatio\n    } else {\n      zoomImg.width = width\n      zoomImg.height = zoomImg.width * imgRatio\n    }\n    return zoomImg\n  }\n\n  render () {\n    return (\n      <canvas className='picture-scrutinizer' />\n    )\n  }\n}\n\nexport default PictureScrutinizer\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PictureScrutinizer/index.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--1-oneOf-0-2!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-0-4!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PictureScrutinizer/index.less\n// module id = 1469\n// module chunks = 9","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.less\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"minimize\":true,\"sourceMap\":true}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js?{\"javascriptEnabled\":true}!./src/components/PictureScrutinizer/index.less\n// module id = 1470\n// module chunks = 9","module.exports = __webpack_public_path__ + \"static/media/justice_league.a324bd16.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/img/justice_league.jpg\n// module id = 1471\n// module chunks = 9","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--1-oneOf-0-2!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-0-4!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Widgets/index.less\n// module id = 393\n// module chunks = 9 33","import * as React from 'react'\nimport Utils from '@utils'\nimport './index.less'\n// import DatePicker from '@components/DatePicker'\nimport PictureScrutinizer from '@components/PictureScrutinizer'\nimport src from '@img/justice_league.jpg'\n\ninterface IProps {\n  height: number,\n  width: number\n}\n\nclass Widgets extends React.Component<IProps> {\n  render () {\n    // const fromDate = new Date('1991-11-8')\n    // const toDate = new Date()\n    const { height, width } = this.props\n    return (\n      <div className='widget-wrapper'>\n        {/* <DatePicker fromDate={fromDate} toDate={toDate}/> */}\n        <PictureScrutinizer\n          wrapperHeight={height}\n          wrapperWidth={width}\n          src={src}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Utils.connect({\n  component: Widgets,\n  mapStateToProps: state => ({\n    height: state.common.contentHeight,\n    width: state.common.contentWidth\n  })\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Widgets/index.tsx","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".widget-wrapper{width:100%;height:100%}\", \"\", {\"version\":3,\"sources\":[\"/Users/leonzhang/Documents/github/typescript/leon-ts-app/src/pages/Widgets/index.less\"],\"names\":[],\"mappings\":\"AAAA,gBACE,WAAY,AACZ,WAAa,CACd\",\"file\":\"index.less\",\"sourcesContent\":[\".widget-wrapper {\\n  width: 100%;\\n  height: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"minimize\":true,\"sourceMap\":true}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js?{\"javascriptEnabled\":true}!./src/pages/Widgets/index.less\n// module id = 650\n// module chunks = 9 33"],"sourceRoot":""}