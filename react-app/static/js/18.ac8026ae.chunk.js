webpackJsonp([18],{151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(e){var t=e.draw,n=e.size,a=e.volume,r=e.currentTime,i=this;this.load=function(e,t,n){i.xhr=new XMLHttpRequest,i.abort(),i.xhr.open("GET",e),i.xhr.responseType="arraybuffer",i.xhr.onload=function(){t(i.xhr.response)},i.xhr.onprogress=function(e){var t=e.loaded,a=e.total;n(t/a*100)},i.xhr.send()},this.abort=function(){return i.xhr&&i.xhr.abort()},this.play=function(e){var t=e.src,n=e.cb,a=e.progressCb,r=++i.count;i.source&&i.source.stop();var o=function(e){if(i.duration=e.duration,r===i.count&&i.ac)try{var t=i.ac.createBufferSource();t.buffer=e,t.loop=!0,t.connect(i.analyser),t.start(),i.source=t,i.visualize(),n()}catch(e){console.log(e)}};t instanceof ArrayBuffer?i.ac.decodeAudioData(t,o):i.load(t,function(e){i.ac.decodeAudioData(e,o)},a)},this.updateVolume=function(e){i.gainNode.gain.value=i.volume=e},this.visualize=function(){var e=new Uint8Array(i.analyser.frequencyBinCount),t=window.requestAnimationFrame,n=function(){i.analyser.getByteFrequencyData(e),i.draw(e,i.volume),i.rafId=t(n);var a=i.ac.currentTime.toFixed(0),r=i.duration.toFixed(0);i.curr&&i.curr===a||(i.curr=a,i.currentTime({curr:a,total:r}))};n()},this.pause=function(){i.ac.suspend(),window.cancelAnimationFrame(i.rafId)},this.resume=function(){i.ac.resume(),i.visualize()},this.stop=function(){i.abort(),i.ac.close(),window.cancelAnimationFrame(i.rafId)},this.source=null,this.count=0,this.ac=new AudioContext,this.draw=t,this.size=n,this.gainNode=this.ac.createGain(),this.gainNode.gain.value=this.volume=a,this.gainNode.connect(this.ac.destination),this.analyser=this.ac.createAnalyser(),this.analyser.fftSize=2*this.size,this.analyser.connect(this.gainNode),this.currentTime=r}}();t.default=a}});
//# sourceMappingURL=18.ac8026ae.chunk.js.map