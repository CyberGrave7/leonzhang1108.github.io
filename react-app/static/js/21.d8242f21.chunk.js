webpackJsonp([21],{155:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(165),r=t.n(a),i=function(){return function(e){var n=e.draw,t=e.size,a=e.volume,i=e.currentTime,o=this;this.initAC=function(){o.ac=new AudioContext,o.gainNode=o.ac.createGain(),o.gainNode.gain.value=o.volume,o.gainNode.connect(o.ac.destination),o.analyser=o.ac.createAnalyser(),o.analyser.fftSize=2*o.size,o.analyser.connect(o.gainNode)},this.load=function(e,n,t){o.abort(),r()({url:e,responseType:"arraybuffer",onDownloadProgress:function(e){var n=e.loaded,a=e.total;t(n/a*100)},cancelToken:new r.a.CancelToken(function(e){o.axiosCancellation=e})}).then(function(e){n(e.data)}).catch(function(e){r.a.isCancel(e)?console.log("Request canceled",e.message):t("error")})},this.abort=function(){o.axiosCancellation&&o.axiosCancellation("abort")},this.play=function(e){var n=e.src,t=e.cb,a=e.progressCb,r=++o.count;o.source&&o.source.stop();var i=function(e){if(o.buffer=e,r===o.count&&o.ac)try{o.createBufferSource({buffer:e},t)}catch(e){console.log(e)}};n instanceof ArrayBuffer?o.ac.decodeAudioData(n,i):o.load(n,function(e){o.ac.decodeAudioData(e,i)},a)},this.createBufferSource=function(e,n){var t=e.buffer,a=e.start,r=void 0===a?0:a;if(o.source&&o.source.stop(),o.buffer){var i=o.ac.createBufferSource();i.buffer=o.buffer=t,i.loop=!0,i.connect(o.analyser),i.start(0,r),o.source=i,o.visualize(),n&&n()}},this.updateVolume=function(e){o.gainNode.gain.value=o.volume=e},this.visualize=function(){var e=new Uint8Array(o.analyser.frequencyBinCount),n=window.requestAnimationFrame,t=function(){o.analyser.getByteFrequencyData(e),o.draw(e,o.volume),o.rafId=n(t)};t()},this.setCurrent=function(e){void 0===e&&(e=0);var n=o.buffer;o.curr=0,o.createBufferSource({buffer:n,start:e}),o.setInterval(!0)},this.setInterval=function(e){o.interval&&clearInterval(o.interval),o.setCurrTime(e),o.interval=setInterval(function(){o.setCurrTime()},1e3)},this.setCurrTime=function(e){var n=o.buffer?o.buffer.duration.toFixed(0):0;o.currentTime({curr:e?0:++o.curr,total:n})},this.pause=function(){o.ac.suspend(),window.cancelAnimationFrame(o.rafId),o.interval&&clearInterval(o.interval)},this.resume=function(){o.ac.resume(),o.visualize(),o.setInterval()},this.stop=function(){o.abort(),o.ac.close(),window.cancelAnimationFrame(o.rafId)},this.source=null,this.count=0,this.draw=n,this.size=t,this.volume=a,this.currentTime=i,this.initAC()}}();n.default=i}});
//# sourceMappingURL=21.d8242f21.chunk.js.map