{"version":3,"sources":["webpack:///./src/pages/Food/Word.tsx","webpack:///./src/pages/Food/index.tsx"],"names":["__webpack_require__","r","__webpack_exports__","_utils__WEBPACK_IMPORTED_MODULE_0__","Word","_a","key","words","w","h","this","text","x","Math","random","y","font","speed","Search","antd_lib_input__WEBPACK_IMPORTED_MODULE_0___default","a","Food","_super","_this","apply","arguments","onSearch","v","console","log","initCanvas","res","wordsAttr","wrapper","offsetHeight","offsetWidth","c","canvas","getContext","width","height","fillStyle","globalAlpha","push","_Word__WEBPACK_IMPORTED_MODULE_4__","animation","forEach","_","i","fillText","measureText","stroke","init","clearRect","requestAnimationFrame","loop_1","interval","setInterval","__extends","prototype","componentWillMount","setState","loaded","componentDidMount","_food_json__WEBPACK_IMPORTED_MODULE_5__","componentWillUnmount","clearInterval","render","state","react__WEBPACK_IMPORTED_MODULE_2__","className","ref","el","placeholder","enterButton","size","id","style","opacity"],"mappings":"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","file":"js/13.254be7c656749a17a767.bundle.js","sourcesContent":["import Utils from '@utils'\nexport default class Word {\n  text: string\n  x: number\n  y: number\n  font: string\n  speed: number\n  constructor ({ key, words, w, h }) {\n    this.text = key\n    this.x = Math.random() * w\n    this.y = Math.random() * h\n    this.font = words[key] * 10 + 'px arial'\n    this.speed = (words[key] > 5 ? words[key] - 2.5 : words[key]) + Utils.random(0, 5)\n  }\n}\n","import { Input } from 'antd'\nimport * as React from 'react'\nimport './index.less'\nimport Word from './Word'\nimport FoodOptions from './food.json'\nconst Search = Input.Search\n\ninterface IFoodState {\n  loaded: boolean\n}\n\nclass Food extends React.Component<{}, IFoodState> {\n\n  canvas\n  wrapper\n  words = {}\n  interval\n\n  componentWillMount () {\n    this.setState({\n      loaded: false\n    })\n  }\n\n  onSearch = v => {\n    console.log(v)\n  }\n\n  componentDidMount () {\n    this.setState({ loaded: true }, () => this.initCanvas(FoodOptions))\n  }\n\n  initCanvas = res => {\n    this.words = res\n    const wordsAttr: any[] = []\n    const { offsetHeight: h, offsetWidth: w } = this.wrapper\n    const words = this.words\n    const c = this.canvas.getContext('2d')\n    this.canvas.width = w\n    this.canvas.height = h\n\n    c.fillStyle = '#000'\n    c.globalAlpha = 0.2\n\n    for (const key in this.words) {\n      if (key) {\n        wordsAttr.push(new Word({ key, words, w, h }))\n      }\n    }\n\n    const move = () => {\n      wordsAttr.forEach((_, i) => {\n        if (wordsAttr[i].x > w) {\n          wordsAttr[i].x = -wordsAttr[i].width\n          wordsAttr[i].y = Math.random() * h\n        } else {\n          wordsAttr[i].x += wordsAttr[i].speed\n        }\n      })\n    }\n\n    const animation = () => {\n      wordsAttr.forEach((_, i) => {\n        c.font = wordsAttr[i].font\n        c.fillText(wordsAttr[i].text, wordsAttr[i].x, wordsAttr[i].y)\n        wordsAttr[i].width = c.measureText(wordsAttr[i].text).width\n        c.stroke()\n      })\n      move()\n    }\n\n    const init = () => {\n      c.clearRect(0, 0, w, h)\n      animation()\n    }\n\n    if (requestAnimationFrame) {\n      const loop = () => {\n        init()\n        requestAnimationFrame(loop)\n      }\n      loop()\n    } else {\n      this.interval = setInterval(init, 24)\n    }\n\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.interval)\n  }\n\n  render () {\n    const { loaded } = this.state\n    return (\n      <div className='food-wrapper' ref={el => this.wrapper = el}>\n      {\n        loaded ? (\n          <>\n            <div className='input'>\n              <Search\n                placeholder='food you want'\n                enterButton='Add'\n                size='large'\n                onSearch={this.onSearch}\n              />\n            </div>\n            <canvas id='c' className='canvas' ref={el => this.canvas = el} style={{ opacity: loaded ? 1 : 0 }}/>\n          </>\n        ) : <div className='loader'/>\n      }\n      </div>\n    )\n  }\n}\n\nexport default Food\n"],"sourceRoot":""}