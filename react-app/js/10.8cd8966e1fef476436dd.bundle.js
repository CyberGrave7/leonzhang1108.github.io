(window.webpackJsonp=window.webpackJsonp||[]).push([[10,32,45],{173:function(n,e,t){"use strict";t.r(e);var r=function(n,e,t){var r={v:0,index:-1};return t.some(function(t,i){var o=t.x===n&&t.y===e;return o&&(r={v:t.v,index:i}),o}),r};e.default={moveRight:function(n){for(var e=!1,t=function(t){for(var i=3,o=function(r){var o=-1;!n.some(function(n,e){var a=n.x===r+1&&n.y===t;return n.x===r&&n.y===t&&(o=e),a&&i--,a})&&o>=0&&(n[o].x=i,e=!0,i--)},a=2;a>=0;a--)o(a);for(a=2;a>=0;a--){var d=r(a,t,n),c=d.v,s=d.index,u=r(a+1,t,n),m=u.v,v=u.index;if(c&&m&&c===m){n[s].x=a+1,n[s].merged=!0,n[v].merged=!0;for(var f=a-1;f>=0;f--){var h=r(f,t,n).index;h>=0&&(n[h].x=n[h].x<3?n[h].x+1:n[h].x)}n.push({x:a+1,y:t,v:2*c,id:Math.random()}),e=!0}}},i=0;i<4;i++)t(i);return{p:n,changed:e}},moveLeft:function(n){for(var e=!1,t=function(t){for(var i=0,o=function(r){var o=-1;!n.some(function(n,e){var a=n.x===r-1&&n.y===t;return n.x===r&&n.y===t&&(o=e),a&&i++,a})&&o>=0&&(n[o].x=i,e=!0,i++)},a=1;a<4;a++)o(a);for(a=1;a<4;a++){var d=r(a,t,n),c=d.v,s=d.index,u=r(a-1,t,n),m=u.v,v=u.index;if(c&&m&&c===m){n[s].x=a-1,n[s].merged=!0,n[v].merged=!0;for(var f=a;f<=3;f++){var h=r(f,t,n).index;h>=0&&(n[h].x=n[h].x>0?n[h].x-1:n[h].x)}n.push({x:a-1,y:t,v:2*c,id:Math.random()}),e=!0}}},i=0;i<4;i++)t(i);return{p:n,changed:e}},moveDown:function(n){for(var e=!1,t=function(t){for(var i=3,o=function(r){var o=-1;!n.some(function(n,e){var a=n.x===t&&n.y===r+1;return n.x===t&&n.y===r&&(o=e),a&&i--,a})&&o>=0&&(n[o].y=i,e=!0,i--)},a=2;a>=0;a--)o(a);for(a=2;a>=0;a--){var d=r(t,a,n),c=d.v,s=d.index,u=r(t,a+1,n),m=u.v,v=u.index;if(c&&m&&c===m){n[s].y=a+1,n[s].merged=!0,n[v].merged=!0;for(var f=a-1;f>=0;f--){var h=r(t,f,n).index;h>=0&&(n[h].y=n[h].y<3?n[h].y+1:n[h].y)}n.push({x:t,y:a+1,v:2*c,id:Math.random()}),e=!0}}},i=0;i<4;i++)t(i);return{p:n,changed:e}},moveUp:function(n){for(var e=!1,t=function(t){for(var i=0,o=function(r){var o=-1;!n.some(function(n,e){var a=n.x===t&&n.y===r-1;return n.x===t&&n.y===r&&(o=e),a&&i++,a})&&o>=0&&(n[o].y=i,e=!0,i++)},a=1;a<4;a++)o(a);for(a=1;a<4;a++){var d=r(t,a,n),c=d.v,s=d.index,u=r(t,a-1,n),m=u.v,v=u.index;if(c&&m&&c===m){n[s].y=a-1,n[s].merged=!0,n[v].merged=!0;for(var f=a;f<=3;f++){var h=r(t,f,n).index;h>=0&&(n[h].y=n[h].y>0?n[h].y-1:n[h].y)}n.push({x:t,y:a-1,v:2*c,id:Math.random()}),e=!0}}},i=0;i<4;i++)t(i);return{p:n,changed:e}}}},327:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},i={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},o=[],a=[];function d(n,e,t){n.addEventListener(e,t,!1)}function c(n,e,t){n.removeEventListener(e,t,!1)}"undefined"!=typeof window&&"undefined"!=typeof document&&function(){var n=document.createElement("div").style;function e(e,t){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];for(var o in i)if(o in n){t.push(i[o]);break}}}"AnimationEvent"in window||(delete r.animationstart.animation,delete i.animationend.animation),"TransitionEvent"in window||(delete r.transitionstart.transition,delete i.transitionend.transition),e(r,o),e(i,a)}();var s={startEvents:o,addStartEventListener:function(n,e){0!==o.length?o.forEach(function(t){d(n,t,e)}):window.setTimeout(e,0)},removeStartEventListener:function(n,e){0!==o.length&&o.forEach(function(t){c(n,t,e)})},endEvents:a,addEndEventListener:function(n,e){0!==a.length?a.forEach(function(t){d(n,t,e)}):window.setTimeout(e,0)},removeEndEventListener:function(n,e){0!==a.length&&a.forEach(function(t){c(n,t,e)})}};e.default=s,n.exports=e.default},331:function(n,e,t){},397:function(n,e,t){"use strict";e.a={keyCode:{left:37,up:38,right:39,down:40}}},71:function(n,e,t){"use strict";t.r(e);var r,i=t(10),o=t(53),a=t.n(o),d=(t(52),t(11)),c=t.n(d),s=(t(194),t(358)),u=t.n(s),m=(t(357),t(1)),v=(t(331),t(173)),f=t(397),h=(r=function(n,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])})(n,e)},function(n,e){function t(){this.constructor=n}r(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}),l=new i.a.Storage("2048"),p=f.a.keyCode,y=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.reset=function(n){i.a.isArray(n)||(n=[],e.addRandom(n,!0),e.addRandom(n,!0),l.set("pieces",null)),e.setState({size:4,pieces:n,cached:{x:0,y:0}})},e.removeMerged=function(n){var t=e.state.pieces.filter(function(n){return!n.merged});e.setState({pieces:t},n)},e.touchstart=function(n){var t=n.changedTouches[0],r=t.pageX,i=t.pageY;e.setState({cached:{x:r,y:i}})},e.touchmove=function(n){return n.preventDefault()},e.touchend=function(n){var t=e.state.cached,r=t.x,i=t.y,o=n.changedTouches[0],a=o.pageX,d=o.pageY,c=0;if(Math.abs(r-a)>Math.abs(i-d)&&Math.abs(r-a)>20)c=r-a>0?p.left:p.right;else{if(!(Math.abs(r-a)<Math.abs(i-d)&&Math.abs(i-d)>20))return;c=i-d>0?p.up:p.down}e.doMove(c)},e.keydown=function(n){return e.doMove(n.keyCode)},e.doMove=function(n){e.removeMerged(function(){var t=e.state.pieces,r=t;switch(n){case p.up:var i=v.default.moveUp(t),o=i.p;i.changed&&(r=e.addRandom(o));break;case p.down:var a=v.default.moveDown(t),d=a.p;a.changed&&(r=e.addRandom(d));break;case p.left:var c=v.default.moveLeft(t),s=c.p;c.changed&&(r=e.addRandom(s));break;case p.right:var u=v.default.moveRight(t),m=u.p;u.changed&&(r=e.addRandom(m))}e.setState({pieces:r})})},e.addRandom=function(n,t){t||setTimeout(function(){return e.setStorage(n)},0);var r=e.doAddRandom(n);return r&&n.push(r),n},e.setStorage=function(n){l.set("pieces",i.a.clone(n).filter(function(n,e){return n.id=e,!n.merged}))},e.doAddRandom=function(n){if(16===n.length)return null;var t=i.a.random(0,4),r=i.a.random(0,4);return n.some(function(n){return n.x===t&&n.y===r})?e.doAddRandom(n):{x:t,y:r,v:e.get4or2(),id:Math.random()}},e.get4or2=function(){return Math.random()>.9?4:2},e.renderGrid=function(){return new Array(e.state.size).fill(null).map(function(n,t){return m.createElement("div",{className:"row",key:t},new Array(e.state.size).fill(null).map(function(n,e){return m.createElement("div",{className:"item",key:e})}))})},e.isGameOver=function(n){var t=e.state.size;if(n.filter(function(n){return!n.merged}).length!==t*t)return!1;var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return n.forEach(function(n){var e=n.x,t=n.y,i=n.v;return r[e][t]=i}),e.canMove(r)},e.canMove=function(n){for(var e=0;e<n.length;e++)for(var t=0;t<n[e].length;t++){if(0===n[e][t])return!1;if(t<n[e].length-1&&n[e][t]===n[e][t+1])return!1;if(e<n.length-1&&n[e][t]===n[e+1][t])return!1}return!0},e}return h(e,n),e.prototype.componentWillMount=function(){this.reset(l.get("pieces")),document.addEventListener("keydown",this.keydown)},e.prototype.componentDidMount=function(){document.addEventListener("touchstart",this.touchstart),document.addEventListener("touchmove",this.touchmove),document.addEventListener("touchend",this.touchend)},e.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.keydown),document.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend)},e.prototype.render=function(){var n=this.state.pieces;return m.createElement("div",{className:"game2048-wrapper"},m.createElement("div",{className:"game2048-container"},m.createElement("div",{className:"grid"},this.renderGrid()),m.createElement("div",{className:"piece-contanier"},(n||[]).map(function(n){return m.createElement("div",{className:"piece piece-"+n.v+" piece-position-"+n.x+"-"+n.y+" "+(n.merged?"merged":""),key:n.id},m.createElement("div",{className:"item"},2048===n.v?m.createElement(c.a,{type:"ts-app icon-batman"}):n.v))})),m.createElement("div",{className:this.isGameOver(n)?"mask":"mask hidden"},"Game Over")),m.createElement("div",{className:"btn-container"},m.createElement(u.a,{title:"Sure about that?",onConfirm:i.a.handle(this.reset),okText:"Yes",cancelText:"No"},m.createElement(a.a,{type:"primary",className:"reset-btn"},"Reset"))))},e}(m.Component);e.default=y}}]);
//# sourceMappingURL=10.8cd8966e1fef476436dd.bundle.js.map