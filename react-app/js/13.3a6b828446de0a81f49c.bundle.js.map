{"version":3,"sources":["webpack:///./src/pages/Food/Word.tsx","webpack:///./node_modules/css-animation/lib/Event.js","webpack:///./src/pages/Food/index.tsx"],"names":["__webpack_require__","r","__webpack_exports__","_utils__WEBPACK_IMPORTED_MODULE_0__","Word","_a","key","words","w","h","this","text","x","Math","random","y","font","speed","Object","defineProperty","exports","value","START_EVENT_NAME_MAP","transitionstart","transition","WebkitTransition","MozTransition","OTransition","msTransition","animationstart","animation","WebkitAnimation","MozAnimation","OAnimation","msAnimation","END_EVENT_NAME_MAP","transitionend","animationend","startEvents","endEvents","addEventListener","node","eventName","eventListener","removeEventListener","window","document","style","createElement","process","EVENT_NAME_MAP","events","baseEventName","hasOwnProperty","baseEvents","styleName","push","detectEvents","TransitionEvents","addStartEventListener","length","forEach","startEvent","setTimeout","removeStartEventListener","addEndEventListener","endEvent","removeEndEventListener","module","Search","antd_lib_input__WEBPACK_IMPORTED_MODULE_0___default","a","Food","_super","_this","apply","arguments","onSearch","v","console","log","initCanvas","res","wordsAttr","wrapper","offsetHeight","offsetWidth","c","canvas","getContext","width","height","fillStyle","globalAlpha","_Word__WEBPACK_IMPORTED_MODULE_4__","_","i","fillText","measureText","stroke","init","clearRect","requestAnimationFrame","loop_1","interval","setInterval","__extends","prototype","componentWillMount","setState","loaded","componentDidMount","_food_json__WEBPACK_IMPORTED_MODULE_5__","componentWillUnmount","clearInterval","render","state","react__WEBPACK_IMPORTED_MODULE_2__","className","ref","el","placeholder","enterButton","size","id","opacity"],"mappings":"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","file":"js/13.3a6b828446de0a81f49c.bundle.js","sourcesContent":["import Utils from '@utils'\nexport default class Word {\n  text: string\n  x: number\n  y: number\n  font: string\n  speed: number\n  constructor ({ key, words, w, h }) {\n    this.text = key\n    this.x = Math.random() * w\n    this.y = Math.random() * h\n    this.font = words[key] * 10 + 'px arial'\n    this.speed = (words[key] > 5 ? words[key] - 2.5 : words[key]) + Utils.random(0, 5)\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar START_EVENT_NAME_MAP = {\n  transitionstart: {\n    transition: 'transitionstart',\n    WebkitTransition: 'webkitTransitionStart',\n    MozTransition: 'mozTransitionStart',\n    OTransition: 'oTransitionStart',\n    msTransition: 'MSTransitionStart'\n  },\n\n  animationstart: {\n    animation: 'animationstart',\n    WebkitAnimation: 'webkitAnimationStart',\n    MozAnimation: 'mozAnimationStart',\n    OAnimation: 'oAnimationStart',\n    msAnimation: 'MSAnimationStart'\n  }\n};\n\nvar END_EVENT_NAME_MAP = {\n  transitionend: {\n    transition: 'transitionend',\n    WebkitTransition: 'webkitTransitionEnd',\n    MozTransition: 'mozTransitionEnd',\n    OTransition: 'oTransitionEnd',\n    msTransition: 'MSTransitionEnd'\n  },\n\n  animationend: {\n    animation: 'animationend',\n    WebkitAnimation: 'webkitAnimationEnd',\n    MozAnimation: 'mozAnimationEnd',\n    OAnimation: 'oAnimationEnd',\n    msAnimation: 'MSAnimationEnd'\n  }\n};\n\nvar startEvents = [];\nvar endEvents = [];\n\nfunction detectEvents() {\n  var testEl = document.createElement('div');\n  var style = testEl.style;\n\n  if (!('AnimationEvent' in window)) {\n    delete START_EVENT_NAME_MAP.animationstart.animation;\n    delete END_EVENT_NAME_MAP.animationend.animation;\n  }\n\n  if (!('TransitionEvent' in window)) {\n    delete START_EVENT_NAME_MAP.transitionstart.transition;\n    delete END_EVENT_NAME_MAP.transitionend.transition;\n  }\n\n  function process(EVENT_NAME_MAP, events) {\n    for (var baseEventName in EVENT_NAME_MAP) {\n      if (EVENT_NAME_MAP.hasOwnProperty(baseEventName)) {\n        var baseEvents = EVENT_NAME_MAP[baseEventName];\n        for (var styleName in baseEvents) {\n          if (styleName in style) {\n            events.push(baseEvents[styleName]);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  process(START_EVENT_NAME_MAP, startEvents);\n  process(END_EVENT_NAME_MAP, endEvents);\n}\n\nif (typeof window !== 'undefined' && typeof document !== 'undefined') {\n  detectEvents();\n}\n\nfunction addEventListener(node, eventName, eventListener) {\n  node.addEventListener(eventName, eventListener, false);\n}\n\nfunction removeEventListener(node, eventName, eventListener) {\n  node.removeEventListener(eventName, eventListener, false);\n}\n\nvar TransitionEvents = {\n  // Start events\n  startEvents: startEvents,\n\n  addStartEventListener: function addStartEventListener(node, eventListener) {\n    if (startEvents.length === 0) {\n      window.setTimeout(eventListener, 0);\n      return;\n    }\n    startEvents.forEach(function (startEvent) {\n      addEventListener(node, startEvent, eventListener);\n    });\n  },\n  removeStartEventListener: function removeStartEventListener(node, eventListener) {\n    if (startEvents.length === 0) {\n      return;\n    }\n    startEvents.forEach(function (startEvent) {\n      removeEventListener(node, startEvent, eventListener);\n    });\n  },\n\n\n  // End events\n  endEvents: endEvents,\n\n  addEndEventListener: function addEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      window.setTimeout(eventListener, 0);\n      return;\n    }\n    endEvents.forEach(function (endEvent) {\n      addEventListener(node, endEvent, eventListener);\n    });\n  },\n  removeEndEventListener: function removeEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      return;\n    }\n    endEvents.forEach(function (endEvent) {\n      removeEventListener(node, endEvent, eventListener);\n    });\n  }\n};\n\nexports['default'] = TransitionEvents;\nmodule.exports = exports['default'];","import { Input } from 'antd'\nimport * as React from 'react'\nimport './index.less'\nimport Word from './Word'\nimport FoodOptions from './food.json'\nconst Search = Input.Search\n\ninterface IFoodState {\n  loaded: boolean\n}\n\nclass Food extends React.Component<{}, IFoodState> {\n\n  canvas\n  wrapper\n  words = {}\n  interval\n\n  componentWillMount () {\n    this.setState({\n      loaded: false\n    })\n  }\n\n  onSearch = v => {\n    console.log(v)\n  }\n\n  componentDidMount () {\n    this.setState({ loaded: true }, () => this.initCanvas(FoodOptions))\n  }\n\n  initCanvas = res => {\n    this.words = res\n    const wordsAttr: any[] = []\n    const { offsetHeight: h, offsetWidth: w } = this.wrapper\n    const words = this.words\n    const c = this.canvas.getContext('2d')\n    this.canvas.width = w\n    this.canvas.height = h\n\n    c.fillStyle = '#000'\n    c.globalAlpha = 0.2\n\n    for (const key in this.words) {\n      if (key) {\n        wordsAttr.push(new Word({ key, words, w, h }))\n      }\n    }\n\n    const move = () => {\n      wordsAttr.forEach((_, i) => {\n        if (wordsAttr[i].x > w) {\n          wordsAttr[i].x = -wordsAttr[i].width\n          wordsAttr[i].y = Math.random() * h\n        } else {\n          wordsAttr[i].x += wordsAttr[i].speed\n        }\n      })\n    }\n\n    const animation = () => {\n      wordsAttr.forEach((_, i) => {\n        c.font = wordsAttr[i].font\n        c.fillText(wordsAttr[i].text, wordsAttr[i].x, wordsAttr[i].y)\n        wordsAttr[i].width = c.measureText(wordsAttr[i].text).width\n        c.stroke()\n      })\n      move()\n    }\n\n    const init = () => {\n      c.clearRect(0, 0, w, h)\n      animation()\n    }\n\n    if (requestAnimationFrame) {\n      const loop = () => {\n        init()\n        requestAnimationFrame(loop)\n      }\n      loop()\n    } else {\n      this.interval = setInterval(init, 24)\n    }\n\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.interval)\n  }\n\n  render () {\n    const { loaded } = this.state\n    return (\n      <div className='food-wrapper' ref={el => this.wrapper = el}>\n      {\n        loaded ? (\n          <>\n            <div className='input'>\n              <Search\n                placeholder='food you want'\n                enterButton='Add'\n                size='large'\n                onSearch={this.onSearch}\n              />\n            </div>\n            <canvas id='c' className='canvas' ref={el => this.canvas = el} style={{ opacity: loaded ? 1 : 0 }}/>\n          </>\n        ) : <div className='loader'/>\n      }\n      </div>\n    )\n  }\n}\n\nexport default Food\n"],"sourceRoot":""}