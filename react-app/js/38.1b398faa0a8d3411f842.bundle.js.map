{"version":3,"sources":["webpack:///./src/pages/MusicVisualizer/floating-title.tsx"],"names":["props","doInterval","interval","setInterval","intervalContent","onOff","offsetWidth","setState","offset","clearInterval","state","width","wrapperWidth","componentDidMount","this","wrapper","componentWillUnmount","componentDidUpdate","dom","render","musicName","className","ref","style","transform","Component"],"mappings":"4aAaA,cAKE,WAAYA,GAAZ,MACE,YAAMA,IAAM,K,OAgCd,EAAAC,WAAa,WACX,EAAKC,SAAWC,aAAY,WAC1B,EAAKC,oBACJ,MAGL,EAAAA,gBAAkB,WACV,cAAEC,EAAA,EAAAA,MAAOC,EAAA,EAAAA,YACf,EAAKC,SAAS,CACZF,OAAQA,EACRG,OAAQH,EAAQ,EAAIC,KAIxB,EAAAG,cAAgB,WACV,EAAKP,UACPO,cAAc,EAAKP,WA/CrB,EAAKQ,MAAQ,CACXC,MAAO,EACPH,OAAQ,EACRH,OAAO,EACPC,YAAa,EACbM,aAAc,G,EAqEpB,OAjF4B,OAgB1B,YAAAC,kBAAA,WACEC,KAAKP,SAAS,CAAEK,aAAcE,KAAKC,QAAQT,cAC3CQ,KAAKb,cAGP,YAAAe,qBAAA,WACEF,KAAKL,iBAGP,YAAAQ,mBAAA,WACU,IAAAN,EAAA,WAAAA,MACR,GAAIG,KAAKI,IAAIZ,cAAgBK,EAAO,CAClC,IAAIL,EAAcQ,KAAKC,QAAQT,YAAcQ,KAAKI,IAAIZ,YACtDA,EAAcA,GAAe,EAAIA,EAAc,EAC/CQ,KAAKP,SAAS,CACZI,MAAOG,KAAKI,IAAIZ,YAChBA,YAAW,EACXD,OAAO,MAyBb,YAAAc,OAAA,sBACUC,EAAA,WAAAA,UACF,aAAEZ,EAAA,EAAAA,OAAQF,EAAA,EAAAA,YAEhB,OACE,yBACEe,UAAW,eAA8B,IAAhBf,EAAoB,OAAS,IACtDgB,IAAK,SAAAA,GACH,EAAKP,QAAUO,IAGjB,yBACEC,MAAO,CAAEC,UAAW,cAAchB,EAAM,OACxCa,UAAU,UACVC,IAAK,SAAAA,GACH,EAAKJ,IAAMI,IAGZF,KAKX,EAjFA,CAA4B,IAAMK,WAkFnB","file":"js/38.1b398faa0a8d3411f842.bundle.js","sourcesContent":["import React from 'react'\ninterface IProps {\n  musicName: string;\n}\n\ninterface IState {\n  wrapperWidth: number;\n  width: number;\n  offset: number;\n  onOff: boolean;\n  offsetWidth: number;\n}\n\nclass FloatingTitle extends React.Component<IProps, IState> {\n  dom\n  wrapper\n  interval\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      width: 0,\n      offset: 0,\n      onOff: false,\n      offsetWidth: 0,\n      wrapperWidth: 0\n    }\n  }\n\n  componentDidMount() {\n    this.setState({ wrapperWidth: this.wrapper.offsetWidth })\n    this.doInterval()\n  }\n\n  componentWillUnmount() {\n    this.clearInterval()\n  }\n\n  componentDidUpdate() {\n    const { width } = this.state\n    if (this.dom.offsetWidth !== width) {\n      let offsetWidth = this.wrapper.offsetWidth - this.dom.offsetWidth\n      offsetWidth = offsetWidth <= 0 ? offsetWidth : 0\n      this.setState({\n        width: this.dom.offsetWidth,\n        offsetWidth,\n        onOff: false\n      })\n    }\n  }\n\n  doInterval = () => {\n    this.interval = setInterval(() => {\n      this.intervalContent()\n    }, 3000)\n  }\n\n  intervalContent = () => {\n    const { onOff, offsetWidth } = this.state\n    this.setState({\n      onOff: !onOff,\n      offset: onOff ? 0 : offsetWidth\n    })\n  }\n\n  clearInterval = () => {\n    if (this.interval) {\n      clearInterval(this.interval)\n    }\n  }\n\n  render() {\n    const { musicName } = this.props\n    const { offset, offsetWidth } = this.state\n\n    return (\n      <div\n        className={`music-name ${offsetWidth === 0 ? 'flex' : ''}`}\n        ref={ref => {\n          this.wrapper = ref\n        }}\n      >\n        <div\n          style={{ transform: `translateX(${offset}px)` }}\n          className=\"content\"\n          ref={ref => {\n            this.dom = ref\n          }}\n        >\n          {musicName}\n        </div>\n      </div>\n    )\n  }\n}\nexport default FloatingTitle\n"],"sourceRoot":""}