{"version":3,"sources":["webpack:///./src/pages/Food/Word.tsx","webpack:///./node_modules/css-animation/lib/Event.js","webpack:///./src/pages/Food/index.tsx"],"names":["key","words","w","h","this","text","x","Math","random","y","font","speed","Object","defineProperty","exports","value","START_EVENT_NAME_MAP","transitionstart","transition","WebkitTransition","MozTransition","OTransition","msTransition","animationstart","animation","WebkitAnimation","MozAnimation","OAnimation","msAnimation","END_EVENT_NAME_MAP","transitionend","animationend","startEvents","endEvents","addEventListener","node","eventName","eventListener","removeEventListener","window","document","style","createElement","process","EVENT_NAME_MAP","events","baseEventName","hasOwnProperty","baseEvents","styleName","push","detectEvents","TransitionEvents","addStartEventListener","length","forEach","startEvent","setTimeout","removeStartEventListener","addEndEventListener","endEvent","removeEndEventListener","module","Search","props","onSearch","v","console","log","initCanvas","res","wordsAttr","offsetHeight","offsetWidth","c","canvas","getContext","width","height","fillStyle","globalAlpha","_","i","fillText","measureText","stroke","init","clearRect","requestAnimationFrame","interval","setInterval","state","loaded","componentDidMount","setState","componentWillUnmount","clearInterval","render","className","ref","el","wrapper","placeholder","enterButton","size","id","opacity","Component"],"mappings":"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","file":"js/14.c729910978018dc89e48.bundle.js","sourcesContent":["import Utils from '@utils'\nexport default class Word {\n  text: string\n  x: number\n  y: number\n  font: string\n  speed: number\n  constructor ({ key, words, w, h }) {\n    this.text = key\n    this.x = Math.random() * w\n    this.y = Math.random() * h\n    this.font = words[key] * 10 + 'px arial'\n    this.speed = (words[key] > 5 ? words[key] - 2.5 : words[key]) + Utils.random(0, 5)\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar START_EVENT_NAME_MAP = {\n  transitionstart: {\n    transition: 'transitionstart',\n    WebkitTransition: 'webkitTransitionStart',\n    MozTransition: 'mozTransitionStart',\n    OTransition: 'oTransitionStart',\n    msTransition: 'MSTransitionStart'\n  },\n\n  animationstart: {\n    animation: 'animationstart',\n    WebkitAnimation: 'webkitAnimationStart',\n    MozAnimation: 'mozAnimationStart',\n    OAnimation: 'oAnimationStart',\n    msAnimation: 'MSAnimationStart'\n  }\n};\n\nvar END_EVENT_NAME_MAP = {\n  transitionend: {\n    transition: 'transitionend',\n    WebkitTransition: 'webkitTransitionEnd',\n    MozTransition: 'mozTransitionEnd',\n    OTransition: 'oTransitionEnd',\n    msTransition: 'MSTransitionEnd'\n  },\n\n  animationend: {\n    animation: 'animationend',\n    WebkitAnimation: 'webkitAnimationEnd',\n    MozAnimation: 'mozAnimationEnd',\n    OAnimation: 'oAnimationEnd',\n    msAnimation: 'MSAnimationEnd'\n  }\n};\n\nvar startEvents = [];\nvar endEvents = [];\n\nfunction detectEvents() {\n  var testEl = document.createElement('div');\n  var style = testEl.style;\n\n  if (!('AnimationEvent' in window)) {\n    delete START_EVENT_NAME_MAP.animationstart.animation;\n    delete END_EVENT_NAME_MAP.animationend.animation;\n  }\n\n  if (!('TransitionEvent' in window)) {\n    delete START_EVENT_NAME_MAP.transitionstart.transition;\n    delete END_EVENT_NAME_MAP.transitionend.transition;\n  }\n\n  function process(EVENT_NAME_MAP, events) {\n    for (var baseEventName in EVENT_NAME_MAP) {\n      if (EVENT_NAME_MAP.hasOwnProperty(baseEventName)) {\n        var baseEvents = EVENT_NAME_MAP[baseEventName];\n        for (var styleName in baseEvents) {\n          if (styleName in style) {\n            events.push(baseEvents[styleName]);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  process(START_EVENT_NAME_MAP, startEvents);\n  process(END_EVENT_NAME_MAP, endEvents);\n}\n\nif (typeof window !== 'undefined' && typeof document !== 'undefined') {\n  detectEvents();\n}\n\nfunction addEventListener(node, eventName, eventListener) {\n  node.addEventListener(eventName, eventListener, false);\n}\n\nfunction removeEventListener(node, eventName, eventListener) {\n  node.removeEventListener(eventName, eventListener, false);\n}\n\nvar TransitionEvents = {\n  // Start events\n  startEvents: startEvents,\n\n  addStartEventListener: function addStartEventListener(node, eventListener) {\n    if (startEvents.length === 0) {\n      window.setTimeout(eventListener, 0);\n      return;\n    }\n    startEvents.forEach(function (startEvent) {\n      addEventListener(node, startEvent, eventListener);\n    });\n  },\n  removeStartEventListener: function removeStartEventListener(node, eventListener) {\n    if (startEvents.length === 0) {\n      return;\n    }\n    startEvents.forEach(function (startEvent) {\n      removeEventListener(node, startEvent, eventListener);\n    });\n  },\n\n\n  // End events\n  endEvents: endEvents,\n\n  addEndEventListener: function addEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      window.setTimeout(eventListener, 0);\n      return;\n    }\n    endEvents.forEach(function (endEvent) {\n      addEventListener(node, endEvent, eventListener);\n    });\n  },\n  removeEndEventListener: function removeEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      return;\n    }\n    endEvents.forEach(function (endEvent) {\n      removeEventListener(node, endEvent, eventListener);\n    });\n  }\n};\n\nexports['default'] = TransitionEvents;\nmodule.exports = exports['default'];","import { Input } from 'antd'\nimport React from 'react'\nimport './index.less'\nimport Word from './Word'\nimport FoodOptions from './food.json'\nconst Search = Input.Search\n\ninterface IFoodState {\n  loaded: boolean\n}\n\nclass Food extends React.Component<{}, IFoodState> {\n\n  canvas\n  wrapper\n  words = {}\n  interval\n\n  constructor (props) {\n    super(props)\n    this.state = {\n      loaded: false\n    }\n  }\n\n  onSearch = v => {\n    console.log(v)\n  }\n\n  componentDidMount () {\n    this.setState({ loaded: true }, () => this.initCanvas(FoodOptions))\n  }\n\n  initCanvas = res => {\n    this.words = res\n    const wordsAttr: any[] = []\n    const { offsetHeight: h, offsetWidth: w } = this.wrapper\n    const words = this.words\n    const c = this.canvas.getContext('2d')\n    this.canvas.width = w\n    this.canvas.height = h\n\n    c.fillStyle = '#000'\n    c.globalAlpha = 0.2\n\n    for (const key in this.words) {\n      if (key) {\n        wordsAttr.push(new Word({ key, words, w, h }))\n      }\n    }\n\n    const move = () => {\n      wordsAttr.forEach((_, i) => {\n        if (wordsAttr[i].x > w) {\n          wordsAttr[i].x = -wordsAttr[i].width\n          wordsAttr[i].y = Math.random() * h\n        } else {\n          wordsAttr[i].x += wordsAttr[i].speed\n        }\n      })\n    }\n\n    const animation = () => {\n      wordsAttr.forEach((_, i) => {\n        c.font = wordsAttr[i].font\n        c.fillText(wordsAttr[i].text, wordsAttr[i].x, wordsAttr[i].y)\n        wordsAttr[i].width = c.measureText(wordsAttr[i].text).width\n        c.stroke()\n      })\n      move()\n    }\n\n    const init = () => {\n      c.clearRect(0, 0, w, h)\n      animation()\n    }\n\n    if (requestAnimationFrame) {\n      const loop = () => {\n        init()\n        requestAnimationFrame(loop)\n      }\n      loop()\n    } else {\n      this.interval = setInterval(init, 24)\n    }\n\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.interval)\n  }\n\n  render () {\n    const { loaded } = this.state\n    return (\n      <div className='food-wrapper' ref={el => this.wrapper = el}>\n      {\n        loaded ? (\n          <>\n            <div className='input'>\n              <Search\n                placeholder='food you want'\n                enterButton='Add'\n                size='large'\n                onSearch={this.onSearch}\n              />\n            </div>\n            <canvas id='c' className='canvas' ref={el => this.canvas = el} style={{ opacity: loaded ? 1 : 0 }}/>\n          </>\n        ) : <div className='loader'/>\n      }\n      </div>\n    )\n  }\n}\n\nexport default Food\n"],"sourceRoot":""}