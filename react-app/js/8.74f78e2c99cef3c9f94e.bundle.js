(window.webpackJsonp=window.webpackJsonp||[]).push([[8,33,38,39,40,41,42,59],{310:function(t,e,n){"use strict";n.r(e);var r,o=n(492),a=n.n(o),i=(n(491),n(0)),c=n.n(i),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.render=function(){var t=this.props,e=t.percent,n=t.formatPercent,r=t.loadingFail;return c.a.createElement("div",{className:"loading-mask"},0!==e||r?r?"":c.a.createElement(a.a,{type:"circle",percent:Number(e)?e:0,format:n,status:r?"exception":100===Number(e)?"success":"active",className:r||100!==Number(e)?"":"loading"}):c.a.createElement("div",{className:"loader"}))},e}(c.a.Component);e.default=u},311:function(t,e,n){"use strict";n.r(e);var r,o=n(0),a=n.n(o),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this,e)||this;return n.doInterval=function(){n.interval=setInterval((function(){n.intervalContent()}),3e3)},n.intervalContent=function(){var t=n.state,e=t.onOff,r=t.offsetWidth;n.setState({onOff:!e,offset:e?0:r})},n.clearInterval=function(){n.interval&&clearInterval(n.interval)},n.state={width:0,offset:0,onOff:!1,offsetWidth:0,wrapperWidth:0},n}return i(e,t),e.prototype.componentDidMount=function(){this.setState({wrapperWidth:this.wrapper.offsetWidth}),this.doInterval()},e.prototype.componentWillUnmount=function(){this.clearInterval()},e.prototype.componentDidUpdate=function(){var t=this.state.width;if(this.dom.offsetWidth!==t){var e=this.wrapper.offsetWidth-this.dom.offsetWidth;e=e<=0?e:0,this.setState({width:this.dom.offsetWidth,offsetWidth:e,onOff:!1})}},e.prototype.render=function(){var t=this,e=this.props.musicName,n=this.state,r=n.offset,o=n.offsetWidth;return a.a.createElement("div",{className:"music-name "+(0===o?"flex":""),ref:function(e){t.wrapper=e}},a.a.createElement("div",{style:{transform:"translateX("+r+"px)"},className:"content",ref:function(e){t.dom=e}},e))},e}(a.a.Component);e.default=c},312:function(t,e,n){"use strict";n.r(e);var r,o=n(466),a=n.n(o),i=(n(465),n(0)),c=n.n(i),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.render=function(){var t=this.props,e=t.totalTime,n=t.slideDuration,r=t.durationOffset,o=t.curr,i=t.durationChanging,s=t.durationChanged,u=t.formatTime;return c.a.createElement("div",{className:"time-zone"},c.a.createElement(a.a,{className:"duration-slider",value:e?(parseInt((n||r)+"",10)+o)%100:0,onChange:i,onAfterChange:s,tipFormatter:null}),c.a.createElement("div",null,u()))},e}(c.a.Component);e.default=u},313:function(t,e,n){"use strict";n.r(e),e.default={draw:function(t){var e=t.ctx,n=t.height,r=t.width,o=t.bars,a=t.barColor;return function(t,i){var c=i;if(e.clearRect(0,0,r,n),Array.isArray(a)){var s=e.createLinearGradient(0,0,0,n),u=a.length;a.forEach((function(t,e){s.addColorStop(e/(u-1),t)})),e.fillStyle=s}else e.fillStyle=a;for(var l=r/o,f=.5*l,p=Math.min(f,10)*c,d=0;d<o;d++){var h=t[d]/256*n*c,m=t[d]>0?Math.min(h+40,n-p):0;e.fillRect(l*d,n-h,f,h),e.fillRect(l*d,n-(m+p),f,p)}}}}},314:function(t,e,n){"use strict";n.r(e);var r=n(121),o=n.n(r),a=function(t){var e=this,n=t.draw,r=t.size,a=t.volume,i=t.currentTime;this.initAC=function(){e.ac=new AudioContext,e.gainNode=e.ac.createGain(),e.gainNode.gain.value=e.volume,e.gainNode.connect(e.ac.destination),e.analyser=e.ac.createAnalyser(),e.analyser.fftSize=2*e.size,e.analyser.connect(e.gainNode)},this.load=function(t,n,r){e.abort(),o()({url:t,responseType:"arraybuffer",onDownloadProgress:function(t){var e=t.loaded,n=t.total;r(e/n*100)},cancelToken:new o.a.CancelToken((function(t){e.axiosCancellation=t}))}).then((function(t){n(t.data)})).catch((function(t){o.a.isCancel(t)?console.log("Request canceled",t.message):r("error")}))},this.abort=function(){return e.axiosCancellation&&e.axiosCancellation("abort")},this.play=function(t){var n=t.src,r=t.cb,o=t.progressCb,a=++e.count;e.source&&e.source.stop();var i=function(t){if(e.buffer=t,a===e.count&&e.ac)try{e.createBufferSource({buffer:t},r)}catch(t){console.log(t)}};n instanceof ArrayBuffer?e.ac.decodeAudioData(n,i):e.load(n,(function(t){e.ac.decodeAudioData(t,i)}),o)},this.createBufferSource=function(t,n){var r=t.buffer,o=t.start,a=void 0===o?0:o;if(e.source&&e.source.stop(),e.buffer){var i=e.ac.createBufferSource();i.buffer=e.buffer=r,i.loop=!0,i.connect(e.analyser),i.start(0,a),e.source=i,e.visualize(),n&&n()}},this.updateVolume=function(t){console.log(t),e.gainNode.gain.value=e.volume=t},this.visualize=function(){var t=new Uint8Array(e.analyser.frequencyBinCount),n=window.requestAnimationFrame,r=function(){e.analyser.getByteFrequencyData(t),e.draw(t,e.volume),e.rafId=n(r)};r()},this.setCurrent=function(t){void 0===t&&(t=0);var n=e.buffer;e.curr=0,e.createBufferSource({buffer:n,start:t}),e.setInterval(!0)},this.setInterval=function(t){e.interval&&clearInterval(e.interval),t&&e.setCurrTime(t),e.interval=setInterval((function(){e.setCurrTime()}),1e3)},this.setCurrTime=function(t){var n=e.buffer?e.buffer.duration.toFixed(0):0;e.currentTime({curr:t?0:++e.curr,total:n})},this.pause=function(){e.ac.suspend(),window.cancelAnimationFrame(e.rafId),e.interval&&clearInterval(e.interval)},this.resume=function(){e.ac.resume(),e.visualize(),e.setInterval()},this.stop=function(){e.abort(),e.ac.close(),window.cancelAnimationFrame(e.rafId)},this.source=null,this.count=0,this.draw=n,this.size=r,this.volume=a,this.currentTime=i,this.initAC()};e.default=a},315:function(t,e,n){"use strict";n.r(e);var r,o=n(466),a=n.n(o),i=(n(465),n(0)),c=n.n(i),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.render=function(){var t=this.props,e=t.changeVolume,n=t.togglePause,r=t.pause,o=t.setMute,i=t.mute;return c.a.createElement("div",{className:"volume-zone"},c.a.createElement("div",{className:"icon anticon anticon-ts-app icon-"+(i?"mute":"volume"),onClick:o}),c.a.createElement(a.a,{className:"slider",defaultValue:77,onChange:e,tipFormatter:null,disabled:i}),c.a.createElement("div",{onClick:n,className:"icon anticon anticon-ts-app icon-"+(r?"play":"pause")}))},e}(c.a.Component);e.default=u},481:function(t,e,n){},493:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){return function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,s(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(r=[{key:"componentDidUpdate",value:function(){var t=this,e=Date.now(),n=!1;Object.keys(this.paths).forEach((function(r){var o=t.paths[r];if(o){n=!0;var a=o.style;a.transitionDuration=".3s, .3s, .3s, .06s",t.prevTimeStamp&&e-t.prevTimeStamp<100&&(a.transitionDuration="0s, 0s")}})),n&&(this.prevTimeStamp=Date.now())}},{key:"render",value:function(){return c(s(e.prototype),"render",this).call(this)}}])&&a(n.prototype,r),o&&a(n,o),e}(t)},f=n(1),p=n.n(f),d={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1},h=p.a.oneOfType([p.a.number,p.a.string]),m={className:p.a.string,percent:p.a.oneOfType([h,p.a.arrayOf(h)]),prefixCls:p.a.string,strokeColor:p.a.oneOfType([p.a.string,p.a.arrayOf(p.a.oneOfType([p.a.string,p.a.object])),p.a.object]),strokeLinecap:p.a.oneOf(["butt","round","square"]),strokeWidth:h,style:p.a.object,trailColor:p.a.string,trailWidth:h};function y(){return(y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function v(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(){var t,n,r,o,a,i,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=this,n=!(o=(t=b(e)).call.apply(t,[this].concat(u)))||"object"!=typeof o&&"function"!=typeof o?O(r):o,a=O(n),c={},(i="paths")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,t),n=e,(r=[{key:"render",value:function(){var t=this,e=this.props,n=e.className,r=e.percent,a=e.prefixCls,i=e.strokeColor,c=e.strokeLinecap,s=e.strokeWidth,u=e.style,l=e.trailColor,f=e.trailWidth,p=e.transition,d=v(e,["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"]);delete d.gapPosition;var h=Array.isArray(r)?r:[r],m=Array.isArray(i)?i:[i],g=s/2,b=100-s/2,O="M ".concat("round"===c?g:0,",").concat(g,"\n           L ").concat("round"===c?b:100,",").concat(g),w="0 0 100 ".concat(s),C=0;return o.a.createElement("svg",y({className:"".concat(a,"-line ").concat(n),viewBox:w,preserveAspectRatio:"none",style:u},d),o.a.createElement("path",{className:"".concat(a,"-line-trail"),d:O,strokeLinecap:c,stroke:l,strokeWidth:f||s,fillOpacity:"0"}),h.map((function(e,n){var r={strokeDasharray:"".concat(e,"px, 100px"),strokeDashoffset:"-".concat(C,"px"),transition:p||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},i=m[n]||m[m.length-1];return C+=e,o.a.createElement("path",{key:n,className:"".concat(a,"-line-path"),d:O,strokeLinecap:c,stroke:i,strokeWidth:s,fillOpacity:"0",ref:function(e){t.paths[n]=e},style:r})})))}}])&&g(n.prototype,r),a&&g(n,a),e}(r.Component);C.propTypes=m,C.defaultProps=d;var k=l(C);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(n,!0).forEach((function(e){A(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(){return(P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function T(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D=0;function W(t){return+t.replace("%","")}function z(t){return Array.isArray(t)?t:[t]}function I(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=50-r/2,i=0,c=-a,s=0,u=-2*a;switch(arguments.length>5?arguments[5]:void 0){case"left":i=-a,c=0,s=2*a,u=0;break;case"right":i=a,c=0,s=-2*a,u=0;break;case"bottom":c=a,u=2*a}var l="M 50,50 m ".concat(i,",").concat(c,"\n   a ").concat(a,",").concat(a," 0 1 1 ").concat(s,",").concat(-u,"\n   a ").concat(a,",").concat(a," 0 1 1 ").concat(-s,",").concat(u),f=2*Math.PI*a;return{pathString:l,pathStyle:{stroke:n,strokeDasharray:"".concat(e/100*(f-o),"px ").concat(f,"px"),strokeDashoffset:"-".concat(o/2+t/100*(f-o),"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s"}}}var L=function(t){function e(){var t,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,t=!(r=E(e).call(this))||"object"!=typeof r&&"function"!=typeof r?N(n):r,A(N(t),"paths",{}),A(N(t),"gradientId",0),t.gradientId=D,D+=1,t}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,t),n=e,(r=[{key:"getStokeList",value:function(){var t=this,e=this.props,n=e.prefixCls,r=e.percent,a=e.strokeColor,i=e.strokeWidth,c=e.strokeLinecap,s=e.gapDegree,u=e.gapPosition,l=z(r),f=z(a),p=0;return l.map((function(e,r){var a=f[r]||f[f.length-1],l="[object Object]"===Object.prototype.toString.call(a)?"url(#".concat(n,"-gradient-").concat(t.gradientId,")"):"",d=I(p,e,a,i,s,u),h=d.pathString,m=d.pathStyle;return p+=e,o.a.createElement("path",{key:r,className:"".concat(n,"-circle-path"),d:h,stroke:l,strokeLinecap:c,strokeWidth:0===e?0:i,fillOpacity:"0",style:m,ref:function(e){t.paths[r]=e}})}))}},{key:"render",value:function(){var t=this.props,e=t.prefixCls,n=t.strokeWidth,r=t.trailWidth,a=t.gapDegree,i=t.gapPosition,c=t.trailColor,s=t.strokeLinecap,u=t.style,l=t.className,f=t.strokeColor,p=T(t,["prefixCls","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor"]),d=I(0,100,c,n,a,i),h=d.pathString,m=d.pathStyle;delete p.percent;var y=z(f).find((function(t){return"[object Object]"===Object.prototype.toString.call(t)}));return o.a.createElement("svg",P({className:"".concat(e,"-circle ").concat(l),viewBox:"0 0 100 100",style:u},p),y&&o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:"".concat(e,"-gradient-").concat(this.gradientId),x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(y).sort((function(t,e){return W(t)-W(e)})).map((function(t,e){return o.a.createElement("stop",{key:e,offset:t,stopColor:y[t]})})))),o.a.createElement("path",{className:"".concat(e,"-circle-trail"),d:h,stroke:c,strokeLinecap:s,strokeWidth:r||n,fillOpacity:"0",style:m}),this.getStokeList().reverse())}}])&&S(n.prototype,r),a&&S(n,a),e}(r.Component);L.propTypes=_({},m,{gapPosition:p.a.oneOf(["top","bottom","left","right"])}),L.defaultProps=_({},d,{gapPosition:"top"});var F=l(L);n.d(e,"Line",(function(){return k})),n.d(e,"Circle",(function(){return F}));e.default={Line:k,Circle:F}},83:function(t,e,n){"use strict";n.r(e);var r,o=n(11),a=n(0),i=n(310),c=n(311),s=(n(481),n(312)),u=n(313),l=n(314),f=n(315),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});window.AudioContext=window.AudioContext||void 0;var d=function(t){function e(e){var n=t.call(this,e)||this;return n.visibilityChange=function(){var t=n.state.visualizer;"hidden"===document.visibilityState?(t.pause(),n.setState({pause:!0})):(t.resume(),n.setState({pause:!1}))},n.resize=function(){var t=n.state,e=t.width,r=t.height,o=n.canvas;o.width=e,o.height=r},n.play=function(t){var e=n.state.src;t?n.state.visualizer.play(t):o.a.isString(e)&&n.state.visualizer.play({src:e,cb:n.afterLoading,progressCb:n.progress})},n.progress=function(t){n.mounted&&(isNaN(t)?n.setState({percent:0,loadingFail:!0,showAdd:!0}):n.setState({percent:t,showAdd:!0}))},n.afterLoading=function(){n.setState({loading:!1,showAdd:!0},(function(){n.state.visualizer.setCurrent(0)}))},n.restartVisualizer=function(){if(n.state.compatible){var t=n.canvas.getContext("2d"),e=n.state,r=e.height,o=e.width,a=e.bars,i=e.barColor,c=e.volume,s={ctx:t,height:r,width:o,bars:a,barColor:i},f=n.currentTime;n.setState({visualizer:new l.default({size:a,draw:u.default.draw(s),volume:c,currentTime:f})},n.play),n.resize()}},n.currentTime=function(t){var e=t.curr,r=t.total;n.mounted&&n.setState({currentTime:e,totalTime:r})},n.changeVolume=function(t){n.state.visualizer.updateVolume(t/100)},n.togglePause=function(){var t=n.state,e=t.visualizer,r=t.pause;r?e.resume():e.pause(),n.setState({pause:!r})},n.formatPercent=function(t){return 100===t?"decoding":n.state.loadingFail?"↓":t.toFixed(1)+"%"},n.formatTime=function(){var t=n.state,e=t.currentTime,r=t.totalTime,a=t.durationOffset,i=t.slideDuration;return o.a.secondFormatToTime(r?(e%r+n.durationToSecond(i||a))%r:0)+" / "+o.a.secondFormatToTime(r)},n.durationChanging=function(t){n.setState({slideDuration:t,currentTime:0})},n.durationChanged=function(t){n.setState({slideDuration:null,durationOffset:t,pause:!1,currentTime:0},(function(){n.state.visualizer.setCurrent(n.durationToSecond(t)),n.state.visualizer.resume()}))},n.durationToSecond=function(t){return parseInt((t/100*n.state.totalTime).toFixed(0),10)},n.fileChange=function(){n.input.files[0]&&(n.state.visualizer.abort(),n.setState({showAdd:!1,percent:0},(function(){var t=new FileReader,e=n.input.files[0].name;t.readAsArrayBuffer(n.input.files[0]),t.onload=function(t){n.play({src:t.currentTarget.result,cb:n.afterLoading,progressCb:n.progress}),n.setState({loadingFail:!1,loading:!0,durationOffset:0,musicName:e})}})))},n.setMute=function(){var t=n.state.mute;n.setState({mute:!t},(function(){var t=n.state,e=t.mute,r=t.volume;n.changeVolume(e?0:100*r)}))},document.addEventListener("visibilitychange",n.visibilityChange),n.mounted=!0,n.state={src:"NoMusic",bars:64,barColor:["gold","aqua"],height:n.props.isMobile?.5*n.props.h:400,width:n.props.isMobile?300:600,pause:!1,volume:.77,loading:!0,percent:0,totalTime:0,currentTime:0,durationOffset:0,slideDuration:null,loadingFail:!1,compatible:!!window.AudioContext,showAdd:!1,musicName:"",mute:!1},n}return p(e,t),e.prototype.componentDidMount=function(){this.restartVisualizer()},e.prototype.componentWillUnmount=function(){this.state.visualizer.stop(),document.removeEventListener("visibilitychange",this.visibilityChange),this.mounted=!1},e.prototype.render=function(){var t=this,e=this.state,n=e.pause,r=e.loading,o=e.percent,u=e.durationOffset,l=e.slideDuration,p=e.currentTime,d=e.totalTime,h=e.loadingFail,m=e.compatible,y=e.showAdd,v=e.musicName,g=e.mute;if(!m)return a.createElement("div",{className:"music-visualizer"},"not compatible");var b=d?parseInt((p%d/d*100).toFixed(0),10):0;return a.createElement("div",{className:"music-visualizer "+(r?"loading":"loaded")},a.createElement("canvas",{ref:function(e){t.canvas=e}}),a.createElement(c.default,{musicName:v}),r?"":a.createElement(f.default,{pause:n,mute:g,setMute:this.setMute,togglePause:this.togglePause,changeVolume:this.changeVolume}),r?"":a.createElement(s.default,{curr:b,totalTime:d,formatTime:this.formatTime,slideDuration:l,durationOffset:u,durationChanged:this.durationChanged,durationChanging:this.durationChanging}),r?a.createElement(i.default,{percent:o,formatPercent:this.formatPercent,loadingFail:h}):"",a.createElement("a",{className:"upload "+(y?"":"disappear")},a.createElement("div",{className:"anticon anticon-ts-app icon-add"}),a.createElement("input",{className:"change",ref:function(e){t.input=e},type:"file",accept:"audio/mpeg",onChange:this.fileChange})))},e}(a.Component);e.default=o.a.connect({component:d,mapStateToProps:function(t){return{isMobile:t.common.isMobile,h:t.common.contentHeight}}})}}]);
//# sourceMappingURL=8.74f78e2c99cef3c9f94e.bundle.js.map