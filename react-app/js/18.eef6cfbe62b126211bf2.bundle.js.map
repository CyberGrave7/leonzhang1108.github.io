{"version":3,"sources":["webpack:///./src/img/justice_league.jpg","webpack:///./node_modules/imgzoomer/dist/imgzoomer.esm.js","webpack:///./src/pages/Widgets/index.tsx"],"names":["module","exports","__webpack_require__","p","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","imgzoomer_esm_Zoomer","Zoomer","el","options","this","canvas","ctx","times","outerTimes","currentTimes","lastX","lastY","lastMouseX","lastMouseY","top","left","img","zoomImg","callback","svgDragging","handleMouseDown","bind","handleMouseMove","handleMouseUp","handleMouseWheel","initCanvas","value","_elm","document","querySelector","concat","getContext","calculateCanvasSize","console","error","_ref","width","height","wrapperWidth","wrapperHeight","url","_this","Image","onload","render","removeEvents","initEvents","src","_left","_top","sTop","sLeft","_ref2","calculate","clearRect","drawImage","e","offsetX","offsetY","movedX","movedY","_this2","factor","Math","pow","wheelDelta","requestAnimationFrame","_","imgWidth","imgHeight","ratio","imgRatio","parentElement","addEventListener","removeEventListener","preventDefault","stopPropagation","zoom","clicked","resetTopLeft","drag","isUndefined","v","undefined","imgzoomer_esm_SVGLabelEditor","SVGLabelEditor","imgZoomer","pointsList","blockList","temp","dragging","polygonMove","mousedownX","mousedownY","circleDragging","group","index","isRectangle","svgMousedown","svgMousemove","svgMouseup","_wrapper","rerender","dx","dy","_this$temp$index","_x","x","_y","y","rerenderTempPoints","resetMousedownPoint","_this$pointsList$grou","renderSingleArea","_offsetX","_offsetY","_index","_dx","_dy","map","_this$temp$","x0","y0","_this$calculateAddPoi","calculateAddPoint","x1","y1","getRectangle","isDragging","tagName","button","addTempPoint","splice","addPointList","push","removeTempGroup","rerenderExsitPoints","tempWrapper","remove","wrapper","clientX","clientY","_this$_wrapper$getBou","getBoundingClientRect","offsetLeft","offsetTop","type","createElementNS","_ref3","forEach","points","calculatedPoints","g","renderGroup","polygon","getElementsByTagName","reRenderPolygon","line","circle","_ref4","x2","y2","reRenderLine","p2","reRenderCircle","_this3","renderTempGroup","_ref5","c","call","createSVGElement","id","setAttribute","appendChild","_ref6","_this4","split","removeGroup","convertPoints2String","_ref7","_ref8","_this5","_ref8$p","_ref8$p2","setStrokeWidth","_g","_i","getAttribute","parseInt","append","_ref9","_ref10","_this6","_ref10$p","calculateSinglePoint","_ref11","join","Widgets_Widgets","_super","Widgets","apply","arguments","getPoints","modal_default","a","info","title","content","react","svgLabelEditor","item","_a","__extends","componentDidMount","draw","justice_league_default","componentWillUnmount","className","button_default","onClick","__webpack_exports__","utils","connect","component","mapStateToProps","state","common","contentHeight","contentWidth"],"mappings":"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","file":"js/18.eef6cfbe62b126211bf2.bundle.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/justice_league.7f16e.jpg\";","/*!\n * imgzoomer v1.0.2\n * https://github.com/leonzhang1108/imgzoomer\n * Released under the MIT License.\n */\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar Zoomer =\n/*#__PURE__*/\nfunction () {\n  function Zoomer(el, options) {\n    _classCallCheck(this, Zoomer);\n\n    this.canvas = null;\n    this.ctx = null;\n    this.times = 1;\n    this.outerTimes;\n    this.currentTimes = 1;\n    this.lastX = 0;\n    this.lastY = 0;\n    this.lastMouseX = 0;\n    this.lastMouseY = 0;\n    this.top = null;\n    this.left = null;\n    this.img = null;\n    this.zoomImg = null;\n    this.callback = options.callback;\n    this.svgDragging = false;\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleMouseWheel = this.handleMouseWheel.bind(this);\n    this.initCanvas(el, options);\n  }\n\n  _createClass(Zoomer, [{\n    key: \"initCanvas\",\n    value: function initCanvas(el, options) {\n      var _elm = document.querySelector(\"#\".concat(el));\n\n      this.canvas = _elm;\n      this.ctx = _elm.getContext('2d');\n\n      if (!options) {\n        console.error('width and height need to specify');\n        return;\n      }\n\n      this.calculateCanvasSize(options);\n    }\n  }, {\n    key: \"calculateCanvasSize\",\n    value: function calculateCanvasSize(_ref) {\n      var width = _ref.width,\n          height = _ref.height;\n      var canvas = this.canvas;\n\n      if (canvas) {\n        this.wrapperWidth = canvas.width = width;\n        this.wrapperHeight = canvas.height = height;\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(url) {\n      var _this = this;\n\n      var img = this.img = new Image();\n\n      img.onload = function () {\n        _this.render();\n\n        _this.removeEvents();\n\n        _this.initEvents();\n      };\n\n      img.src = url;\n    }\n  }, {\n    key: \"render\",\n    value: function render(options) {\n      var _left = 0;\n      var _top = 0;\n\n      if (options) {\n        _left = options.left;\n        _top = options.top;\n      }\n\n      var sTop = this.top,\n          sLeft = this.left,\n          currentTimes = this.currentTimes,\n          times = this.times,\n          wrapperWidth = this.wrapperWidth,\n          wrapperHeight = this.wrapperHeight,\n          ctx = this.ctx;\n\n      var _ref2 = this.zoomImg || this.calculate(this.img),\n          width = _ref2.width,\n          height = _ref2.height;\n\n      if (!options) {\n        if (sTop && sLeft) {\n          _left = sLeft;\n          _top = sTop;\n        } else {\n          _left = (wrapperWidth - width) / 2;\n          _top = (wrapperHeight - height) / 2;\n        }\n      }\n\n      _left = _left + ((this.lastMouseX || 0) - _left) * (1 - currentTimes);\n      _top = _top + ((this.lastMouseY || 0) - _top) * (1 - currentTimes);\n      this.lastX = _left;\n      this.lastY = _top;\n      ctx.clearRect(0, 0, wrapperWidth, wrapperHeight);\n      ctx.drawImage(this.img, _left, _top, width * times, height * times);\n      this.callback && this.callback({\n        times: this.outerTimes || 1,\n        top: _top,\n        left: _left\n      });\n    }\n  }, {\n    key: \"drag\",\n    value: function drag(e) {\n      var offsetX = e.offsetX,\n          offsetY = e.offsetY;\n      var sTop = this.top,\n          sLeft = this.left;\n\n      var _left = sLeft + offsetX - this.movedX;\n\n      var _top = sTop + offsetY - this.movedY;\n\n      this.render({\n        left: _left,\n        top: _top\n      });\n    }\n  }, {\n    key: \"zoom\",\n    value: function zoom(e) {\n      var _this2 = this;\n\n      var factor = Math.pow(1.1, e.wheelDelta / 300);\n      this.times *= factor;\n      this.currentTimes *= factor;\n      this.outerTimes *= factor;\n      requestAnimationFrame(function (_) {\n        _this2.render();\n      });\n    }\n  }, {\n    key: \"calculate\",\n    value: function calculate(img) {\n      var wrapperWidth = this.wrapperWidth,\n          wrapperHeight = this.wrapperHeight;\n      var imgWidth = img.width,\n          imgHeight = img.height;\n      var ratio = imgHeight / imgWidth - wrapperHeight / wrapperWidth;\n      var imgRatio = imgHeight / imgWidth;\n\n      if (!this.zoomImg) {\n        this.zoomImg = {};\n\n        if (ratio > 0) {\n          this.outerTimes = wrapperHeight / imgHeight;\n          this.zoomImg.height = wrapperHeight;\n          this.zoomImg.width = wrapperHeight / imgRatio;\n        } else {\n          this.outerTimes = wrapperWidth / imgWidth;\n          this.zoomImg.width = wrapperWidth;\n          this.zoomImg.height = wrapperWidth * imgRatio;\n        }\n      }\n\n      return this.zoomImg;\n    }\n  }, {\n    key: \"initEvents\",\n    value: function initEvents() {\n      var parentElement = this.canvas.parentElement.parentElement;\n      parentElement.addEventListener('wheel', this.handleMouseWheel);\n      parentElement.addEventListener('mousedown', this.handleMouseDown);\n      parentElement.addEventListener('mousemove', this.handleMouseMove);\n      parentElement.addEventListener('mouseup', this.handleMouseUp);\n    }\n  }, {\n    key: \"removeEvents\",\n    value: function removeEvents() {\n      var parentElement = this.canvas.parentElement.parentElement;\n      parentElement.removeEventListener('wheel', this.handleMouseWheel);\n      parentElement.removeEventListener('mousedown', this.handleMouseDown);\n      parentElement.removeEventListener('mousemove', this.handleMouseMove);\n      parentElement.removeEventListener('mouseup', this.handleMouseUp);\n    }\n  }, {\n    key: \"handleMouseWheel\",\n    value: function handleMouseWheel(e) {\n      if (this.lastMouseX && this.lastMouseY) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.zoom(e);\n      }\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(e) {\n      var offsetX = e.offsetX,\n          offsetY = e.offsetY;\n      this.clicked = true;\n      this.movedX = offsetX;\n      this.movedY = offsetY;\n      this.resetTopLeft();\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(e) {\n      if (this.svgDragging) return;\n      var offsetX = e.offsetX,\n          offsetY = e.offsetY;\n      var currentTimes = this.currentTimes;\n      this.lastMouseX = offsetX;\n      this.lastMouseY = offsetY;\n\n      if (currentTimes !== 1) {\n        this.currentTimes = 1;\n      }\n\n      if (this.clicked) {\n        this.drag(e);\n      } else {\n        this.resetTopLeft();\n      }\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(e) {\n      this.svgDragging = false;\n      this.clicked = false;\n      this.movedX = 0;\n      this.movedY = 0;\n      this.resetTopLeft();\n    }\n  }, {\n    key: \"resetTopLeft\",\n    value: function resetTopLeft() {\n      var left = this.left,\n          top = this.top,\n          lastX = this.lastX,\n          lastY = this.lastY;\n\n      if (lastX !== left || lastY !== top) {\n        this.left = lastX;\n        this.top = lastY;\n      }\n    }\n  }]);\n\n  return Zoomer;\n}();\n\nvar isUndefined = function isUndefined(v) {\n  return v === undefined;\n};\nvar getRectangle = function getRectangle(_ref) {\n  var x0 = _ref.x0,\n      y0 = _ref.y0,\n      x1 = _ref.x1,\n      y1 = _ref.y1;\n  return [{\n    x: x0,\n    y: y0\n  }, {\n    x: x1,\n    y: y0\n  }, {\n    x: x1,\n    y: y1\n  }, {\n    x: x0,\n    y: y1\n  }, {\n    x: x0,\n    y: y0\n  }];\n};\n\nvar SVGLabelEditor =\n/*#__PURE__*/\nfunction () {\n  function SVGLabelEditor(el, _ref) {\n    var imgZoomer = _ref.imgZoomer,\n        pointsList = _ref.pointsList;\n\n    _classCallCheck(this, SVGLabelEditor);\n\n    if (!imgZoomer) {\n      console.error('imgZoomer need to specify');\n      return;\n    }\n\n    this.pointsList = pointsList || [];\n    this.blockList = [];\n    this.temp = [];\n    this.dragging = false;\n    this.clicked = false;\n    this.polygonMove = false;\n    this.imgZoomer = imgZoomer;\n    this.mousedownX = 0;\n    this.mousedownY = 0;\n    this.circleDragging = false;\n    this.group = undefined;\n    this.index = undefined;\n    this.isRectangle = false;\n    this.svgMousedown = this.svgMousedown.bind(this);\n    this.svgMousemove = this.svgMousemove.bind(this);\n    this.svgMouseup = this.svgMouseup.bind(this);\n    this._wrapper = document.querySelector(\"#\".concat(el));\n    this.imgZoomer.callback = this.rerender.bind(this);\n    this.removeEvents();\n    this.initEvents();\n  }\n\n  _createClass(SVGLabelEditor, [{\n    key: \"initEvents\",\n    value: function initEvents() {\n      this._wrapper.addEventListener('mousedown', this.svgMousedown);\n\n      this._wrapper.addEventListener('mousemove', this.svgMousemove);\n\n      this._wrapper.addEventListener('mouseup', this.svgMouseup);\n    }\n  }, {\n    key: \"removeEvents\",\n    value: function removeEvents() {\n      this._wrapper.removeEventListener('mousedown', this.svgMousedown);\n\n      this._wrapper.removeEventListener('mousemove', this.svgMousemove);\n\n      this._wrapper.removeEventListener('mouseup', this.svgMouseup);\n    }\n  }, {\n    key: \"svgMousedown\",\n    value: function svgMousedown() {\n      this.clicked = true;\n    }\n  }, {\n    key: \"setIsRectangle\",\n    value: function setIsRectangle(v) {\n      this.isRectangle = v || false;\n    }\n  }, {\n    key: \"svgMousemove\",\n    value: function svgMousemove(e) {\n      var _this = this;\n\n      if (this.clicked) {\n        this.dragging = true;\n      } // drag circle\n\n\n      if (this.circleDragging) {\n        var offsetX = e.offsetX,\n            offsetY = e.offsetY;\n        var group = this.group,\n            index = this.index,\n            times = this.times,\n            mousedownX = this.mousedownX,\n            mousedownY = this.mousedownY;\n        var dx = offsetX - mousedownX;\n        var dy = offsetY - mousedownY;\n\n        if (!isUndefined(index) && !isUndefined(group)) {\n          var _this$pointsList$grou = this.pointsList[group][index],\n              x = _this$pointsList$grou.x,\n              y = _this$pointsList$grou.y;\n          this.pointsList[group][index] = {\n            x: x + dx / times,\n            y: y + dy / times\n          };\n          this.renderSingleArea(this.pointsList[group], group);\n          this.resetMousedownPoint(e);\n        } else {\n          var _this$temp$index = this.temp[index],\n              _x = _this$temp$index.x,\n              _y = _this$temp$index.y;\n          this.temp[index] = {\n            x: _x + dx / times,\n            y: _y + dy / times\n          };\n          this.rerenderTempPoints();\n          this.resetMousedownPoint(e);\n        }\n      } // drag polygon\n\n\n      if (this.imgZoomer.svgDragging && !this.circleDragging) {\n        var _offsetX = e.offsetX,\n            _offsetY = e.offsetY;\n        var _index = this.index;\n\n        var _dx = _offsetX - this.mousedownX;\n\n        var _dy = _offsetY - this.mousedownY;\n\n        this.pointsList[_index] = this.pointsList[_index].map(function (_ref2) {\n          var x = _ref2.x,\n              y = _ref2.y;\n          return {\n            x: x + _dx / _this.times,\n            y: y + _dy / _this.times\n          };\n        });\n        this.renderSingleArea(this.pointsList[_index], _index);\n        this.resetMousedownPoint(e);\n      }\n\n      if (this.isRectangle && this.temp.length) {\n        var _this$temp$ = this.temp[0],\n            x0 = _this$temp$.x,\n            y0 = _this$temp$.y;\n\n        var _this$calculateAddPoi = this.calculateAddPoint(e),\n            x1 = _this$calculateAddPoi.x,\n            y1 = _this$calculateAddPoi.y;\n\n        this.temp = getRectangle({\n          x0: x0,\n          y0: y0,\n          x1: x1,\n          y1: y1\n        });\n        this.rerenderTempPoints();\n      }\n    }\n  }, {\n    key: \"svgMouseup\",\n    value: function svgMouseup(e) {\n      this.clicked = false;\n      this.circleDragging = false;\n      this.imgZoomer.svgDragging = false;\n      this.group = undefined;\n      this.index = undefined;\n      if (this.isDragging()) return;\n\n      switch (e.target.tagName) {\n        case 'svg':\n          e.button !== 2 && this.addTempPoint(e);\n          break;\n\n        case 'circle':\n          if (this.isRectangle && this.temp.length) {\n            this.temp.splice(this.temp.length - 1);\n            this.addPointList();\n          }\n\n          break;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      var dragging = this.dragging;\n      this.dragging = false;\n      return dragging;\n    }\n  }, {\n    key: \"addPointList\",\n    value: function addPointList() {\n      if (this.temp.length < 3) return;\n      this.pointsList.push(this.temp);\n      this.removeTempGroup();\n      this.rerenderExsitPoints();\n    }\n  }, {\n    key: \"removeTempGroup\",\n    value: function removeTempGroup() {\n      this.temp = [];\n      var tempWrapper = document.querySelector('#temp');\n      tempWrapper && tempWrapper.remove();\n    }\n  }, {\n    key: \"removeGroup\",\n    value: function removeGroup(index) {\n      this.pointsList[index] = [];\n      var wrapper = document.querySelector(\"#svginner-\".concat(index));\n      wrapper && wrapper.remove();\n    }\n  }, {\n    key: \"addTempPoint\",\n    value: function addTempPoint(e) {\n      var p = this.calculateAddPoint(e);\n      this.temp.push(p);\n      this.rerenderTempPoints();\n    }\n  }, {\n    key: \"calculateAddPoint\",\n    value: function calculateAddPoint(e) {\n      var clientX = e.clientX,\n          clientY = e.clientY;\n\n      var _this$_wrapper$getBou = this._wrapper.getBoundingClientRect(),\n          offsetLeft = _this$_wrapper$getBou.left,\n          offsetTop = _this$_wrapper$getBou.top;\n\n      var top = this.top,\n          left = this.left,\n          times = this.times;\n      var x = (clientX - (left || 0) - offsetLeft) / times;\n      var y = (clientY - (top || 0) - offsetTop) / times;\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"createSVGElement\",\n    value: function createSVGElement(type) {\n      return document.createElementNS('http://www.w3.org/2000/svg', type);\n    }\n  }, {\n    key: \"rerender\",\n    value: function rerender(_ref3) {\n      var times = _ref3.times,\n          top = _ref3.top,\n          left = _ref3.left;\n      this.times = times;\n      this.top = top;\n      this.left = left;\n      this.rerenderExsitPoints();\n      this.rerenderTempPoints();\n    }\n  }, {\n    key: \"rerenderExsitPoints\",\n    value: function rerenderExsitPoints() {\n      // exists points\n      this.pointsList.forEach(this.renderSingleArea.bind(this));\n    }\n  }, {\n    key: \"renderSingleArea\",\n    value: function renderSingleArea(points, index) {\n      var _this2 = this;\n\n      var length = points.length;\n      var calculatedPoints = this.calculate(points);\n      if (!this.pointsList[index].length) return; // add group\n\n      var g = this.renderGroup(index); // render polygon\n\n      var polygon = g.getElementsByTagName('polygon')[0];\n      this.reRenderPolygon({\n        polygon: polygon,\n        g: g,\n        index: index\n      }); // render lines and circles\n\n      calculatedPoints.forEach(function (p, i) {\n        var line = g.getElementsByTagName('line')[i];\n        var circle = g.getElementsByTagName('circle')[i];\n\n        var _ref4 = i === length - 1 ? calculatedPoints[0] : calculatedPoints[i + 1],\n            x2 = _ref4.x,\n            y2 = _ref4.y;\n\n        _this2.reRenderLine({\n          line: line,\n          p: p,\n          p2: {\n            x2: x2,\n            y2: y2\n          },\n          g: g,\n          i: i\n        });\n\n        _this2.reRenderCircle({\n          circle: circle,\n          p: p,\n          g: g,\n          i: i,\n          index: index\n        });\n      });\n    }\n  }, {\n    key: \"rerenderTempPoints\",\n    value: function rerenderTempPoints() {\n      var _this3 = this;\n\n      var g = this.renderTempGroup();\n      var calculatedPoints = this.calculate(this.temp);\n      var length = calculatedPoints.length;\n      calculatedPoints.forEach(function (p, i) {\n        var circle = g.getElementsByTagName('circle')[i];\n        var line = g.getElementsByTagName('line')[i];\n\n        var _ref5 = i === length - 1 ? calculatedPoints[0] : calculatedPoints[i + 1],\n            x2 = _ref5.x,\n            y2 = _ref5.y;\n\n        var c = _this3.reRenderCircle({\n          circle: circle,\n          p: p,\n          g: g,\n          i: i\n        });\n\n        if (i === 0) {\n          c.addEventListener('mouseup', function () {\n            return !_this3.dragging && _this3.addPointList.call(_this3);\n          });\n        }\n\n        i !== length - 1 && _this3.reRenderLine({\n          line: line,\n          p: p,\n          p2: {\n            x2: x2,\n            y2: y2\n          },\n          g: g\n        });\n      });\n    }\n  }, {\n    key: \"renderGroup\",\n    value: function renderGroup(i) {\n      var g = this._wrapper.querySelector(\"#svginner-\".concat(i));\n\n      if (!g) {\n        g = this.createSVGElement('g');\n        g.id = \"svginner-\".concat(i);\n        g.setAttribute('class', 'polygon');\n\n        this._wrapper.appendChild(g);\n      }\n\n      return g;\n    }\n  }, {\n    key: \"renderTempGroup\",\n    value: function renderTempGroup() {\n      var g = document.querySelector('#temp');\n\n      if (!g) {\n        g = this.createSVGElement('g');\n        g.id = 'temp';\n\n        this._wrapper.appendChild(g);\n      }\n\n      return g;\n    }\n  }, {\n    key: \"reRenderPolygon\",\n    value: function reRenderPolygon(_ref6) {\n      var _this4 = this;\n\n      var polygon = _ref6.polygon,\n          g = _ref6.g,\n          index = _ref6.index;\n\n      if (!polygon) {\n        polygon = this.createSVGElement('polygon');\n        polygon.setAttribute('fill', 'rgb(56, 120, 196, .5)');\n        polygon.setAttribute('cursor', 'move');\n        polygon.addEventListener('mousedown', function (e) {\n          _this4.imgZoomer.svgDragging = true;\n          _this4.index = e.target.parentElement.id.split('-')[1];\n\n          _this4.resetMousedownPoint(e);\n        });\n        polygon.addEventListener('mouseup', function (e) {\n          _this4.imgZoomer.svgDragging = false;\n          _this4.index = undefined;\n        });\n        polygon.addEventListener('contextmenu', function (e) {\n          _this4.removeGroup(index);\n\n          e.preventDefault();\n        });\n        g.appendChild(polygon);\n      }\n\n      polygon.setAttribute('points', this.convertPoints2String(this.calculate(this.pointsList[index])));\n    }\n  }, {\n    key: \"resetMousedownPoint\",\n    value: function resetMousedownPoint(_ref7) {\n      var offsetX = _ref7.offsetX,\n          offsetY = _ref7.offsetY;\n      this.mousedownX = offsetX;\n      this.mousedownY = offsetY;\n    }\n  }, {\n    key: \"reRenderLine\",\n    value: function reRenderLine(_ref8) {\n      var _this5 = this;\n\n      var line = _ref8.line,\n          _ref8$p = _ref8.p,\n          x = _ref8$p.x,\n          y = _ref8$p.y,\n          _ref8$p2 = _ref8.p2,\n          x2 = _ref8$p2.x2,\n          y2 = _ref8$p2.y2,\n          g = _ref8.g,\n          i = _ref8.i;\n\n      if (!line) {\n        line = this.createSVGElement('line');\n        line.setAttribute('stroke', 'rgb(211, 220, 230)');\n        this.setStrokeWidth({\n          line: line,\n          v: 2\n        });\n        !isUndefined(i) && line.setAttribute('index', i);\n        line.addEventListener('mouseover', function () {\n          return _this5.setStrokeWidth({\n            line: line,\n            v: 5\n          });\n        });\n        line.addEventListener('mouseout', function () {\n          return _this5.setStrokeWidth({\n            line: line,\n            v: 2\n          });\n        });\n        line.addEventListener('click', function (e) {\n          var target = e.target;\n          var parent = target.parentElement;\n          var id = parent.id;\n\n          if (id !== 'temp') {\n            var _g = id.split('-')[1];\n\n            var _i = target.getAttribute('index');\n\n            var p = _this5.calculateAddPoint(e);\n\n            _this5.pointsList[_g].splice(parseInt(_i) + 1, 0, p);\n\n            _this5.renderSingleArea(_this5.pointsList[_g], _g);\n          }\n        });\n        g.append(line);\n      }\n\n      line.setAttribute('x1', x);\n      line.setAttribute('y1', y);\n      line.setAttribute('x2', x2);\n      line.setAttribute('y2', y2);\n    }\n  }, {\n    key: \"setStrokeWidth\",\n    value: function setStrokeWidth(_ref9) {\n      var line = _ref9.line,\n          v = _ref9.v;\n      line.setAttribute('stroke-width', v);\n    }\n  }, {\n    key: \"reRenderCircle\",\n    value: function reRenderCircle(_ref10) {\n      var _this6 = this;\n\n      var circle = _ref10.circle,\n          _ref10$p = _ref10.p,\n          x = _ref10$p.x,\n          y = _ref10$p.y,\n          g = _ref10.g,\n          i = _ref10.i,\n          index = _ref10.index;\n\n      if (!circle) {\n        circle = this.createSVGElement('circle');\n        circle.setAttribute('fill', 'rgb(89, 249, 46)');\n        circle.setAttribute('cursor', 'move');\n        !isUndefined(i) && circle.setAttribute('index', i);\n        !isUndefined(index) && circle.setAttribute('group', index);\n        circle.addEventListener('mousedown', function (e) {\n          _this6.imgZoomer.svgDragging = true;\n          _this6.circleDragging = true;\n          !isUndefined(index) && (_this6.group = index);\n          _this6.index = isUndefined(i) ? e.target.getAttribute('index') : i;\n\n          _this6.resetMousedownPoint(e);\n        });\n        circle.addEventListener('mouseup', function () {\n          _this6.imgZoomer.svgDragging = false;\n          _this6.circleDragging = false;\n        });\n        g.append(circle);\n      }\n\n      circle.setAttribute('r', 6);\n      circle.setAttribute('cx', x);\n      circle.setAttribute('cy', y);\n      return circle;\n    }\n  }, {\n    key: \"calculate\",\n    value: function calculate(points) {\n      return points.map(this.calculateSinglePoint.bind(this));\n    }\n  }, {\n    key: \"calculateSinglePoint\",\n    value: function calculateSinglePoint(p) {\n      var top = this.top,\n          left = this.left,\n          times = this.times;\n      var x = p.x,\n          y = p.y;\n      return {\n        x: left + x * times,\n        y: top + y * times\n      };\n    }\n  }, {\n    key: \"convertPoints2String\",\n    value: function convertPoints2String(points) {\n      return points.map(function (_ref11) {\n        var x = _ref11.x,\n            y = _ref11.y;\n        return \"\".concat(x, \",\").concat(y);\n      }).join(' ');\n    }\n  }]);\n\n  return SVGLabelEditor;\n}();\n\nexport { Zoomer, SVGLabelEditor };\n","// import DatePicker from '@cpt/DatePicker'\n// import ImgZoomer from '@cpt/ImgZoomer'\nimport src from '@img/justice_league.jpg'\nimport Utils from '@utils'\nimport * as React from 'react'\nimport './index.less'\nimport * as imgzoomer from 'imgzoomer'\nimport { Button, Modal } from 'antd'\n\ninterface IProps {\n  height: number,\n  width: number\n}\n\nclass Widgets extends React.Component<IProps> {\n  svgLabelEditor\n  imgZoomer\n\n  componentDidMount () {\n    const { height, width } = this.props\n    const { Zoomer, SVGLabelEditor } = imgzoomer\n    this.imgZoomer = new Zoomer('canvas', { width, height })\n    this.imgZoomer.draw(src)\n\n    this.svgLabelEditor = new SVGLabelEditor('svg-wrapper', {\n      imgZoomer: this.imgZoomer,\n      pointsList: [\n        [\n          { x: 415.84196194762626, y: 147.26284891271456 },\n          { x: 600.8419619476263, y: 190.26284891271456 },\n          { x: 653.8419619476264, y: 352.26284891271456 },\n          { x: 376.1088135552601, y: 340.5695301104572 }\n        ],\n        [\n          { x: 940.7072245800349, y: 338.003545055495 },\n          { x: 1013.1629207825664, y: 471.97822859979857 },\n          { x: 880.5553258458576, y: 447.37063366308996 }\n        ]\n      ]\n    })\n  }\n\n  componentWillUnmount () {\n    this.imgZoomer.removeEvents()\n    this.svgLabelEditor.removeEvents()\n  }\n\n  getPoints = () => {\n    Modal.info({\n      title: 'Points',\n      content: (\n        <div>\n          {\n            this.svgLabelEditor.pointsList.map((item, i) => (\n              <div key={i}>\n                [{\n                  item.map(({ x, y }, index) => <div key={index}>({ x }, { y })</div>)\n                }]\n              </div>\n            ))\n          }\n        </div>\n      )\n    })\n  }\n\n  render () {\n    // const fromDate = new Date('1991-11-8')\n    // const toDate = new Date()\n    return (\n      <div className='widget-wrapper'>\n        {/* <DatePicker fromDate={fromDate} toDate={toDate}/> */}\n        {/* <ImgZoomer\n          wrapperHeight={height}\n          wrapperWidth={width}\n          src={src}\n        /> */}\n        <svg id='svg-wrapper'/>\n        <canvas id='canvas'/>\n        <Button className='btn' type='primary' onClick={this.getPoints}>get points</Button>\n      </div>\n    )\n  }\n}\n\nexport default Utils.connect({\n  component: Widgets,\n  mapStateToProps: state => ({\n    height: state.common.contentHeight,\n    width: state.common.contentWidth\n  })\n})\n"],"sourceRoot":""}