(window.webpackJsonp=window.webpackJsonp||[]).push([[14,66],{310:function(e,t,n){},355:function(e,t,n){"use strict";t.a={keyCode:{left:37,up:38,right:39,down:40}}},81:function(e,t,n){"use strict";n.r(t);var o,r,i,a=n(1),c=n(9),s=(n(310),n(355)),u=n(315),l=n.n(u),d=(n(153),n(568)),f=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=s.a.keyCode;!function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(i||(i={}));var h=i.Up,m=i.Down,v=i.Left,w=i.Right,k=((r={})[h]=m,r[m]=h,r[v]=w,r[w]=v,r),y=function(){return[0,1,2,3,4,5,6,7,8,9]},g=200,C=function(e,t){var n=c.a.random(0,t-1);return e.includes(n)?C(e,t):n},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.size=(t.props.isMobile,20),t.rowCount=~~(t.props.w/t.size),t.colCount=~~(t.props.h/t.size),t.max=t.rowCount*t.colCount,t.direction=w,t.snake=y(),t.friut=C(t.snake,t.max),t.speed=g,t.count=0,t.state={isGameOver:!1,hint:""},t.keydown=function(e){switch(e.keyCode){case p.up:t.go(h);break;case p.down:t.go(m);break;case p.left:t.go(v);break;case p.right:t.go(w)}},t.go=function(e){t.state.isGameOver||(t.direction!==k[e]&&(t.direction=e),t.init())},t.init=function(){clearInterval(t.interval),t.doCycle(),t.interval=setInterval(t.doCycle,t.speed)},t.reset=function(){t.setState({isGameOver:!1},function(){t.clearReact(),t.snake=y(),t.direction=w,t.speed=g,t.init()})},t.doCycle=function(){t.resetSnake(),t.drawSnake()},t.clearReact=function(){var e=t.props,n=e.w,o=e.h;t.ctx.clearRect(0,0,n,o)},t.resetSnake=function(){t.clearReact();var e=t.snake[t.snake.length-1],n=t.getHead(e);if(e===t.friut){if(t.friut=C(t.snake,t.max),7===t.count)return t.speed*=.8,t.count=0,void t.init();t.count++}else t.snake.shift();t.snake.includes(n)?(clearInterval(t.interval),t.setState({hint:"Game Over",isGameOver:!0})):t.snake.length===t.max?(clearInterval(t.interval),t.setState({hint:"You Win!!!",isGameOver:!0})):t.snake.push(n)},t.drawFriut=function(){t.draw(t.friut,"blue")},t.getHead=function(e){var n,o=t,r=o.rowCount,i=o.colCount,a=o.max;switch(o.direction){case v:return~~((n=e-1)/r)!=~~(e/r)||e<=0?e+r-1:n;case w:return~~((n=e+1)/r)!=~~(e/r)?e-r+1:n;case h:return(n=e-r)<0?a+e%r:n;case m:return~~((n=e+r)/r)>i?e%r:n}},t.drawSnake=function(){t.drawFriut();var e=t.snake.length;t.snake.forEach(function(n,o){return t.draw(n,o!==e-1?"#666":"#333")})},t.draw=function(e,n){t.ctx.fillStyle=n,t.ctx.fillRect(e%t.rowCount*t.size+1,~~(e/t.rowCount)*t.size+1,t.size-1,t.size-1)},t}return f(t,e),t.prototype.componentWillMount=function(){document.addEventListener("keydown",this.keydown)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.keydown)},t.prototype.componentDidMount=function(){var e=this;this.ctx=this.canvas.getContext("2d"),this.init();var t=d.create({zone:this.remote,color:"#777"});t.on("dir:up",function(){return e.go(h)}),t.on("dir:down",function(){return e.go(m)}),t.on("dir:left",function(){return e.go(v)}),t.on("dir:right",function(){return e.go(w)})},t.prototype.render=function(){var e=this,t=this.props,n=t.w,o=t.h,r=this.state,i=r.isGameOver,c=r.hint;return a.createElement("div",{className:"snake-wrapper"},a.createElement("canvas",{ref:function(t){return e.canvas=t},width:n,height:o,style:{backgroundColor:"#dcdcdc"}}),a.createElement("div",{className:"remote-area",ref:function(t){return e.remote=t}}),i?a.createElement("div",{className:"over"},a.createElement("div",{className:"hint"},c),a.createElement(l.a,{type:"primary",onClick:this.reset},"Reset")):"")},t}(a.Component);t.default=c.a.connect({component:b,mapStateToProps:function(e){return{w:e.common.contentWidth,h:e.common.contentHeight,isMobile:e.common.isMobile}}})}}]);
//# sourceMappingURL=14.e3e11191c1878f5f08dc.bundle.js.map