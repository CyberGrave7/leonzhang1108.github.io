{"version":3,"sources":["webpack:///./src/pages/MusicVisualizer/floating-title.tsx"],"names":["props","doInterval","interval","setInterval","intervalContent","onOff","offsetWidth","setState","offset","clearInterval","state","width","wrapperWidth","componentDidMount","this","wrapper","componentWillUnmount","componentDidUpdate","dom","render","musicName","className","ref","style","transform","Component"],"mappings":"4aAaA,cAME,WAAaA,GAAb,MACE,YAAMA,IAAM,K,OAgCd,EAAAC,WAAa,WACX,EAAKC,SAAWC,aAAY,WAC1B,EAAKC,oBACJ,MAGL,EAAAA,gBAAkB,WACV,cAAEC,EAAA,EAAAA,MAAOC,EAAA,EAAAA,YACf,EAAKC,SAAS,CACZF,OAAQA,EACRG,OAAQH,EAAQ,EAAIC,KAIxB,EAAAG,cAAgB,WACV,EAAKP,UAAYO,cAAc,EAAKP,WA9CxC,EAAKQ,MAAQ,CACXC,MAAO,EACPH,OAAQ,EACRH,OAAO,EACPC,YAAa,EACbM,aAAc,G,EAsDpB,OAnE4B,OAiB1B,YAAAC,kBAAA,WACEC,KAAKP,SAAS,CAAEK,aAAcE,KAAKC,QAAQT,cAC3CQ,KAAKb,cAGP,YAAAe,qBAAA,WACEF,KAAKL,iBAGP,YAAAQ,mBAAA,WACU,IAAAN,EAAA,WAAAA,MACR,GAAIG,KAAKI,IAAIZ,cAAgBK,EAAO,CAClC,IAAIL,EAAeQ,KAAKC,QAAQT,YAAcQ,KAAKI,IAAIZ,YACvDA,EAAcA,GAAe,EAAIA,EAAc,EAC/CQ,KAAKP,SAAS,CACZI,MAAOG,KAAKI,IAAIZ,YAChBA,YAAW,EACXD,OAAO,MAuBb,YAAAc,OAAA,sBACUC,EAAA,WAAAA,UACF,aAAEZ,EAAA,EAAAA,OAAQF,EAAA,EAAAA,YAEhB,OACE,yBAAKe,UAAW,eAA8B,IAAhBf,EAAoB,OAAS,IAAMgB,IAAK,SAAAA,GAAS,EAAKP,QAAUO,IAC5F,yBAAKC,MAAO,CAAEC,UAAW,cAAchB,EAAM,OAASa,UAAU,UAAUC,IAAK,SAAAA,GAAS,EAAKJ,IAAMI,IAAQF,KAInH,EAnEA,CAA4B,IAAMK,WAoEnB","file":"js/38.103fa18c8ffdc1375a8a.bundle.js","sourcesContent":["import React from 'react'\ninterface IProps {\n  musicName: string\n}\n\ninterface IState {\n  wrapperWidth: number,\n  width: number,\n  offset: number,\n  onOff: boolean,\n  offsetWidth: number\n}\n\nclass FloatingTitle extends React.Component<IProps, IState> {\n\n  dom\n  wrapper\n  interval\n\n  constructor (props) {\n    super(props)\n    this.state = {\n      width: 0,\n      offset: 0,\n      onOff: false,\n      offsetWidth: 0,\n      wrapperWidth: 0\n    }\n  }\n\n  componentDidMount () {\n    this.setState({ wrapperWidth: this.wrapper.offsetWidth })\n    this.doInterval()\n  }\n\n  componentWillUnmount () {\n    this.clearInterval()\n  }\n\n  componentDidUpdate () {\n    const { width } = this.state\n    if (this.dom.offsetWidth !== width) {\n      let offsetWidth = (this.wrapper.offsetWidth - this.dom.offsetWidth)\n      offsetWidth = offsetWidth <= 0 ? offsetWidth : 0\n      this.setState({\n        width: this.dom.offsetWidth,\n        offsetWidth,\n        onOff: false\n      })\n    }\n  }\n\n  doInterval = () => {\n    this.interval = setInterval(() => {\n      this.intervalContent()\n    }, 3000)\n  }\n\n  intervalContent = () => {\n    const { onOff, offsetWidth } = this.state\n    this.setState({\n      onOff: !onOff,\n      offset: onOff ? 0 : offsetWidth\n    })\n  }\n\n  clearInterval = () => {\n    if (this.interval) { clearInterval(this.interval) }\n  }\n\n  render () {\n    const { musicName } = this.props\n    const { offset, offsetWidth } = this.state\n\n    return (\n      <div className={`music-name ${offsetWidth === 0 ? 'flex' : ''}`} ref={ref => { this.wrapper = ref }}>\n        <div style={{ transform: `translateX(${offset}px)` }} className='content' ref={ref => { this.dom = ref }}>{musicName}</div>\n      </div>\n    )\n  }\n}\nexport default FloatingTitle\n"],"sourceRoot":""}